(function(e){function t(t){for(var r,s,o=t[0],c=t[1],l=t[2],d=0,p=[];d<o.length;d++)s=o[d],Object.prototype.hasOwnProperty.call(i,s)&&i[s]&&p.push(i[s][0]),i[s]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);u&&u(t);while(p.length)p.shift()();return a.push.apply(a,l||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],r=!0,o=1;o<n.length;o++){var c=n[o];0!==i[c]&&(r=!1)}r&&(a.splice(t--,1),e=s(s.s=n[0]))}return e}var r={},i={app:0},a=[];function s(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=r,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)s.d(n,r,function(t){return e[t]}.bind(null,r));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=t,o=o.slice();for(var l=0;l<o.length;l++)t(o[l]);var u=c;a.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"076c":function(e,t,n){"use strict";n("7603")},"089d":function(e,t,n){"use strict";n("ec47")},"0949":function(e,t,n){e.exports=n.p+"img/altmer-m.0d1fbd74.png"},"09f5":function(e,t,n){},"0a2c":function(e,t,n){"use strict";n("c93e")},"10e0":function(e,t,n){e.exports=n.p+"img/breton-m.a9d80096.png"},1451:function(e,t,n){"use strict";n("ca71")},1875:function(e,t,n){},"1b25":function(e,t,n){e.exports=n.p+"img/dunmer-m.569e2868.png"},"1ba0":function(e,t,n){},"1d5c":function(e,t,n){"use strict";n("3a48")},"20e3":function(e,t,n){"use strict";n("4b8d")},"282c":function(e,t,n){e.exports=n.p+"img/orc-f.893ea03d.png"},3003:function(e,t,n){},"30fe":function(e,t,n){e.exports=n.p+"img/argonian-f.613d86e8.png"},"317e":function(e,t,n){e.exports=n.p+"img/redguard-f.a8d435a8.png"},"3a48":function(e,t,n){},"3acb":function(e,t,n){e.exports=n.p+"img/bosmer-f.578e9a9d.png"},"40a2":function(e,t,n){},"49a4":function(e,t,n){},"4b8d":function(e,t,n){},"4bc1":function(e,t,n){"use strict";n("62be")},"4f65":function(e,t,n){e.exports=n.p+"img/redguard-m.22e63d39.png"},5151:function(e,t,n){},"53a5":function(e,t,n){"use strict";n("3003")},5605:function(e,t,n){"use strict";n("9840")},"56d7":function(e,t,n){"use strict";n.r(t);n("cadf"),n("551c"),n("f751"),n("097d");var r=n("2b0e"),i=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"app"}},[t("modal-frame"),t("modal-classic-view"),t("transition",{staticClass:"frame-dialogue",style:{width:"100%"},attrs:{name:"fadeHeight",mode:"out-in"}},[t("ModalMain",{directives:[{name:"show",rawName:"v-show",value:e.getOpenModalDialogue,expression:"getOpenModalDialogue"}],attrs:{modalHide:"hideDialogue",header:e.getOpenModalDialogue}},[t("ModalContentDialogue",{attrs:{speaker:e.getOpenModalDialogue}})],1)],1),t("CWorkspace")],1)},a=[],s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"text-reader__wrapper",class:{"text-reader__wrapper_dep":e.dep}},[t("label",{staticClass:"text-reader"},[t("input",{ref:"file",attrs:{type:"file",accept:".json"},on:{change:e.loadTextFromFile}}),e._v("\n    "+e._s(e.dep?"Load dependency":"Load active plugin")+"\n  ")]),e._v("\n  "+e._s(e.dep?e.fileName:e.getActivePluginName)+"\n  "+e._s(e.fileSize||"")+"\n")])},o=[],c=(n("28a5"),n("7f7f"),{props:{dep:{type:String,required:!1,default:""}},data:function(){return{fileName:"",fileSize:null}},computed:{getActivePluginName:function(){return this.$store.getters["getActiveHeader"].TMP_dep}},methods:{formatBytes:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;if(!+e)return"0 Bytes";var n=1024,r=t<0?0:t,i=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],a=Math.floor(Math.log(e)/Math.log(n));return"".concat(parseFloat((e/Math.pow(n,a)).toFixed(r))," ").concat(i[a])},loadTextFromFile:function(e){var t=this,n=e.target.files[0];this.fileName=e.target.files[0].name,this.dep||this.$store.commit("setActivePluginTitle",this.fileName.split(".")[0]),this.fileSize=this.formatBytes(e.target.files[0].size);var r=new FileReader;r.onprogress=function(e){},r.onload=function(e){var n=e.target.result;t.dep?t.$store.dispatch("parseDependency",[JSON.parse(n),t.dep]):t.$store.dispatch("parseLocalPlugin",[JSON.parse(n),t.fileName])},r.readAsText(n)}}}),l=c,u=(n("089d"),n("2877")),d=Object(u["a"])(l,s,o,!1,null,null,null),p=d.exports,f=function(){var e=this,t=e._self._c;return t("div",{staticClass:"journal-frame"},[t("div",{staticClass:"journal-frame__header"},[t("div",{staticClass:"frame-title"},[e._v("Journal")]),t("div",{staticClass:"journal-frame__controls"},[t("div",{staticClass:"add-quest",on:{click:function(t){return e.addQuest()}}},[e._v("\n        New "),t("icon",{staticClass:"add-quest__button",attrs:{name:"plus-circle",scale:"1"}})],1)])]),e.getJournal.length?t("div",{staticClass:"quests"},[t("transition-group",{style:{width:"100%"},attrs:{name:"fadeHeight",mode:"out-in"}},e._l(e.getJournal,(function(e){return t("JournalFrameQuest",{key:e.id||0,attrs:{quest:e}})})),1)],1):e._e()])},_=[],g=(n("96cf"),n("1da1")),m=(n("ac6a"),n("8615"),n("55dd"),function(){var e=this,t=e._self._c;return t("div",{staticClass:"quest"},[t("div",{staticClass:"quest-title",on:{click:e.toggleCollapse}},[e._v("\n    "+e._s(e.questData.name)+"\n  ")]),t("div",{staticClass:"quest-id",on:{click:e.toggleCollapse}},[e._v("\n    "+e._s(e.quest.id)+"\n  ")]),e.questData.entries.length?t("collapse-transition",[t("div",{directives:[{name:"show",rawName:"v-show",value:e.isCollapsed,expression:"isCollapsed"}]},[t("transition-group",{style:{width:"100%"},attrs:{name:"fadeHeight",mode:"out-in"}},e._l(e.questData.entries.filter((function(e){return e.data})).sort((function(e,t){return parseInt(e.data.disposition)-parseInt(t.data.disposition)})),(function(n){return t("div",{key:n.info_id,attrs:{id:e.quest.id+n.data.disposition}},[e.entryEdit!=n.data.disposition?t("div",{staticClass:"entry-wrapper"},[t("div",{staticClass:"quest-entry",class:{"quest-entry_finished":n.quest_finish,"quest-entry_highlighted":e.getIsHighlighted(n.data.disposition)},attrs:{draggable:""},on:{dragstart:function(t){return e.startDrag(t,n)}}},[t("div",{staticClass:"quest-entry__text"},[e._v(e._s(n.text))]),t("div",{staticClass:"quest-entry__index"},[e._v("\n                "+e._s(n.data.disposition)+"\n              ")])]),t("button",{staticClass:"edit-button"},[t("icon",{staticClass:"edit-entry-controls__icon",attrs:{name:"pen",scale:"1"},on:{click:function(t){e.entryEdit=n.data.disposition}}})],1)]):t("div",[t("form",{staticClass:"edit",on:{submit:function(t){return t.preventDefault(),e.editEntry(t,n.info_id)}}},[t("div",{staticClass:"edit-entry"},[t("div",{staticClass:"edit-entry-above"},[t("textarea",{staticClass:"edit-entry-above__text",attrs:{name:"entryText",spellCheck:!0,lang:"en"},domProps:{textContent:e._s(n.text)}}),t("input",{staticClass:"edit-entry-above__disp",attrs:{placeholder:parseInt(n.data.disposition),name:"entryDisp",type:"number"},domProps:{value:parseInt(n.data.disposition)}})]),t("label",{staticClass:"edit-entry__checkbox"},[t("span",[e._v("Finished: ")]),t("input",{attrs:{type:"checkbox",title:"Finished",name:"entryFinished"},domProps:{checked:n.quest_finish}})])]),t("div",{staticClass:"edit-entry-controls"},[t("button",{attrs:{type:"submit"}},[t("icon",{staticClass:"edit-entry-controls__icon",attrs:{name:"save",scale:"1"}})],1),t("button",{on:{click:function(t){t.preventDefault(),e.entryEdit=""}}},[t("icon",{staticClass:"edit-entry-controls__icon",attrs:{name:"ban",scale:"1"}})],1),t("button",{on:{click:function(t){return t.preventDefault(),e.deleteEntry(n.info_id)}}},[t("icon",{staticClass:"edit-entry-controls__icon",attrs:{name:"trash",scale:"1"}})],1)])])])])})),0),t("div",{staticClass:"add-entry",on:{click:e.createEntry}},[e._v("+")])],1)]):t("div",{staticClass:"no-entries"},[e._v("\n    No entries yet. "),t("a",{staticClass:"link",on:{click:e.createEntry}},[e._v("Create?")])])],1)}),v=[],h=n("2909"),y=(n("6b54"),n("e1f6")),k=n("849c"),b=(n("d06d"),{props:{quest:Object},components:{CollapseTransition:y["CollapseTransition"],Icon:k["a"]},data:function(){return{isCollapsed:!1,highlightedComparison:"",highlightedId:"",entryEdit:"",questData:{entries:[]}}},mounted:function(){var e=Object(g["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$store.dispatch("fetchQuestByID",[this.quest.id]);case 2:this.questData=e.sent;case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),watch:{getHighlight:function(e){e.id===this.quest.id?(this.isCollapsed=!0,this.highlightedComparison=e.filter_comparison,this.highlightedId=e.value.Integer):(e.id&&(this.isCollapsed=!1),this.highlightedComparison="",this.highlightedId="")}},computed:{getHighlight:function(){return this.$store.getters["getJournalHighlight"]},getLatestDisposition:function(){return this.questData.entries.length&&this.questData.entries[0].data.disposition?(10*Math.floor(Math.max.apply(Math,Object(h["a"])(this.questData.entries.map((function(e){return parseInt(e.data.disposition)}))))/10+1)).toString():"10"}},methods:{editEntry:function(e,t){this.$store.commit("editJournalEntry",[t,e.target.elements.entryText.value,e.target.elements.entryDisp.value,e.target.elements.entryFinished.checked]),this.entryEdit=""},deleteEntry:function(e){this.entryEdit="",this.$store.commit("deleteJournalEntry",e)},toggleCollapse:function(){this.isCollapsed=!this.isCollapsed},getIsHighlighted:function(e){var t=parseInt(e),n=parseInt(this.highlightedId);switch(this.highlightedComparison){case"Equal":return t==n;case"GreaterEqual":return t>=n;case"LesserEqual":return t<=n;case"Less":return t<n;case"Greater":return t>n;case"NotEqual":return t!=n;default:return!1}},createEntry:function(){this.isCollapsed=!0,this.$store.commit("addJournalEntry",[this.quest.id,"New entry",this.getLatestDisposition])},startDrag:function(e,t){e.dataTransfer.setData("type","Journal"),e.dataTransfer.setData("topic",t.TMP_topic),e.dataTransfer.setData("disposition",t.data.disposition)}}}),C=b,P=(n("7523"),Object(u["a"])(C,m,v,!1,null,null,null)),w=P.exports,T={computed:{getJournal:function(){return this.$store.getters["getAllQuestIDs"]},getQuestNamesList:function(){var e=this.getJournal.map((function(e){return'["'.concat(e.id.toLowerCase(),'"]: "').concat(e.name||"skip",'",')}));return e},getHighlighted:function(){return this.$store.getters["getJournalHighlight"]},getHighlightedId:function(){var e=this.getHighlighted.value;if(e)return this.getHighlighted.id+Object.values(e)[0]}},watch:{getHighlightedId:function(){var e=Object(g["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log(t),e.next=3,new Promise((function(e){return setTimeout(e,300)}));case 3:t&&(n=document.getElementById(t),n&&n.scrollIntoView({behavior:"smooth",block:"center",inline:"center"}));case 4:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},components:{JournalFrameQuest:w,Icon:k["a"]},methods:{addQuest:function(){this.$store.commit("setPrimaryModal","NewQuest")}}},x=T,O=(n("53a5"),Object(u["a"])(x,f,_,!1,null,null,null)),S=O.exports,D=function(){var e=this,t=e._self._c;return t("button",{staticClass:"open-btn",on:{click:e.toggleOpenModal}},[t("icon",{attrs:{name:"folder-open",scale:"1.3"}})],1)},E=[],M={components:{Icon:k["a"]},methods:{toggleOpenModal:function(){this.$store.commit("setPrimaryModal","Upload")}}},F=M,I=(n("8eab"),Object(u["a"])(F,D,E,!1,null,null,null)),N=I.exports,j=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"window",class:{window_dialogue:e.dialogue}},[t("vue-draggable-resizable",{staticClass:"window-frame",attrs:{"prevent-deactivation":!0,"class-name-handle":"my-handle-class",w:1e3,h:600,minHeight:320,minWidth:550,"drag-handle":".drag-handle",parent:!0},on:{dragging:e.onDrag,resizing:e.onResize}},[t("div",{staticClass:"window-header drag-handle"},[t("div",{staticClass:"window-header__left"}),t("div",{staticClass:"window-header__name"},[e._v(e._s(e.header))]),t("div",{staticClass:"window-header__right"},[t("div",{staticClass:"window-header__close",on:{click:e.closeModal}},[t("icon",{attrs:{name:"times",scale:"1.3"}})],1)])]),t("div",{staticClass:"window__content"},[e._t("default")],2)])],1)])},A=[],R=n("fb19"),q=n.n(R),L={components:{Icon:k["a"],VueDraggableResizable:q.a},data:function(){return{width:0,height:0,x:0,y:0}},props:{modalHide:String,header:String,dialogue:Boolean},methods:{closeModal:function(){this.$store.commit(this.modalHide)},onResize:function(e,t,n,r){this.x=e,this.y=t,this.width=n,this.height=r},onDrag:function(e,t){this.x=e,this.y=t}}},$=L,H=(n("e4c7"),Object(u["a"])($,j,A,!1,null,null,null)),G=H.exports,B=function(){var e=this,t=e._self._c;return t("div",{staticClass:"book-frame"},e._l(e.getBooks,(function(e){return t("BookFrameItem",{key:e.id,attrs:{book:e}})})),1)},J=[],V=function(){var e=this,t=e._self._c;return t("div",{staticClass:"quest"},[t("div",{staticClass:"quest-title",on:{click:e.toggleCollapse}},[e._v("\n    "+e._s(e.book.name)+"\n  ")]),t("collapse-transition",[t("div",{directives:[{name:"show",rawName:"v-show",value:e.isCollapsed,expression:"isCollapsed"}]},[t("div",{staticClass:"quest-entry"},[t("div",{staticClass:"quest-entry__text",domProps:{innerHTML:e._s(e.book.text)}})])])])],1)},U=[],Q={props:{book:Object},components:{CollapseTransition:y["CollapseTransition"]},data:function(){return{isCollapsed:!1}},methods:{toggleCollapse:function(){this.isCollapsed=!this.isCollapsed}}},W=Q,z=(n("8e22"),Object(u["a"])(W,V,U,!1,null,null,null)),K=z.exports,X={computed:{getBooks:function(){return this.$store.getters["getBooks"]}},components:{BookFrameItem:K}},Y=X,Z=(n("0a2c"),Object(u["a"])(Y,B,J,!1,null,null,null)),ee=Z.exports,te=function(){var e=this,t=e._self._c;return t("div",{staticClass:"workspace"},[t("ToolBar"),t("CWorkspaceDesk")],1)},ne=[],re=function(){var e=this,t=e._self._c;return t("div",{staticClass:"workspace-desk"},[t("workspace-controls"),t("transition-group",{style:{display:"flex",width:"100%",height:"100%"},attrs:{name:"fadeSidebarr",mode:"out-in"}},[t("Sidebar",{directives:[{name:"show",rawName:"v-show",value:e.getSidebar,expression:"getSidebar"}],key:1}),t("DialogueFrame",{directives:[{name:"show",rawName:"v-show",value:!0,expression:"true"}],key:2})],1)],1)},ie=[],ae=(n("6762"),n("2fdb"),function(){var e=this,t=e._self._c;return t("div",{staticClass:"frame"},[t("div",{staticClass:"frame-controls"},[t("div",{staticClass:"frame-controls-left"},[t("div",{staticClass:"frame-controls-types__type frame-controls-types__type_active",style:{gap:"10px"},on:{click:function(t){return e.addDialogue()}}},[e._v("\n          Add "),t("icon",{attrs:{name:"plus-circle",scale:"1"}})],1),t("div",{staticClass:"frame-controls-types__secondary",style:{gap:"10px"},on:{click:function(t){return e.openClassicView()}}},[e._v("\n          Classic view\n        ")])]),e.getNPCs?t("div",{staticClass:"frame-controls-types"},[e.getSpeakerIdLength?t("div",{staticClass:"frame-controls-types__type",class:{"frame-controls-types__type_active":e.speakerTypes.includes("speaker_id")},on:{click:function(t){return e.toggleType("speaker_id")}}},[e._v("\n          Name "+e._s(e.getSpeakerIdLength)+"\n        ")]):e._e(),e.getSpeakerCellLength?t("div",{staticClass:"frame-controls-types__type",class:{"frame-controls-types__type_active":e.speakerTypes.includes("speaker_cell")},on:{click:function(t){return e.toggleType("speaker_cell")}}},[e._v("\n          Cell "+e._s(e.getSpeakerCellLength)+"\n        ")]):e._e(),e.getSpeakerFactionLength?t("div",{staticClass:"frame-controls-types__type",class:{"frame-controls-types__type_active":e.speakerTypes.includes("speaker_faction")},on:{click:function(t){return e.toggleType("speaker_faction")}}},[e._v("\n          Faction "+e._s(e.getSpeakerFactionLength)+"\n        ")]):e._e(),e.getSpeakerClassLength?t("div",{staticClass:"frame-controls-types__type",class:{"frame-controls-types__type_active":e.speakerTypes.includes("speaker_class")},on:{click:function(t){return e.toggleType("speaker_class")}}},[e._v("\n          Class "+e._s(e.getSpeakerClassLength)+"\n        ")]):e._e(),e.getSpeakerRaceLength?t("div",{staticClass:"frame-controls-types__type",class:{"frame-controls-types__type_active":e.speakerTypes.includes("speaker_rank")},on:{click:function(t){return e.toggleType("speaker_rank")}}},[e._v("\n          Race "+e._s(e.getSpeakerRaceLength)+"\n        ")]):e._e(),e.getDialogueGlobalExist?t("div",{staticClass:"frame-controls-types__type frame-controls-types__type_generic",on:{click:e.openGeneric}},[e._v("\n          Global\n        ")]):e._e()]):e._e()]),t("div",{staticClass:"frame-dialogue__wrapper"},[t("transition-group",{staticClass:"frame-dialogue",style:{width:"100%"},attrs:{name:"fadeHeight",mode:"out-in"}},e._l(e.getNPCs,(function(e){return t("DialogueFrameCard",{key:e,attrs:{"speaker-id":e,type:"npc"}})})),1)],1)])}),se=[],oe=function(){var e=this,t=e._self._c;return t("div",{staticClass:"dialogue-card",on:{click:e.openDialogueModal}},[t("span",{staticClass:"dialogue-card__name"},[e._v(e._s(e.speakerData.name||e.speakerId))]),e.getNpcFace?t("div",{staticClass:"dialogue-card__decoration"}):e._e(),e.getNpcFace?t("img",{staticClass:"dialogue-card__image",attrs:{src:e.getNpcFace?n("fc17")("./"+e.getNpcFace):"",alt:e.speakerData.name||e.speakerId}}):e._e()])},ce=[],le=(n("8e6e"),n("456d"),n("ac4d"),n("8a81"),n("1c4c"),n("7514"),n("ade3")),ue=(n("5df3"),n("4f7f"),n("4dec"));n("aa47");function de(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function pe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?de(Object(n),!0).forEach((function(t){Object(le["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):de(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function fe(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=_e(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,o=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){o=!0,a=e},f:function(){try{s||null==n.return||n.return()}finally{if(o)throw a}}}}function _e(e,t){if(e){if("string"===typeof e)return ge(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ge(e,t):void 0}}function ge(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var me={};new ue["a"]("activePlugin");var ve=function(e){me[e]=new ue["a"](e)},he=function(e){return me[e]},ye=function(){var e=Object(g["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return ve(t),n=he(t),n.version(1).stores({pluginData:"TMP_index,type,TMP_is_active,TMP_topic,TMP_type,TMP_info_id,TMP_prev_id,TMP_next_id,TMP_speaker_id,TMP_speaker_cell,TMP_speaker_faction,TMP_speaker_class,TMP_speaker_rank,TMP_id"}),e.next=5,n.open().catch((function(e){console.error(e.stack||e)}));case 5:return e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ke=function(){var e=Object(g["a"])(regeneratorRuntime.mark((function e(){var t,n,r,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(me["activePlugin"]){e.next=2;break}throw"NO_INDEXEDDB_PLUGIN";case 2:return t=me["activePlugin"],e.next=5,t.pluginData.where("type").equals("Header").toArray();case 5:if(n=e.sent,n.length){e.next=8;break}throw"NO_HEADERFOUND";case 8:return r=n[0],i=r.masters.map((function(e){return e[0]})),e.abrupt("return",i);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),be=function(){var e=Object(g["a"])(regeneratorRuntime.mark((function e(t){var n,r,i,a,s,o,c,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(me["activePlugin"]){e.next=2;break}throw"NO_INDEXEDDB_PLUGIN";case 2:return n=me["activePlugin"],e.prev=3,e.next=6,n.pluginData.where("TMP_id").equals(t).and((function(e){return"Npc"===e["type"]||"Creature"===e["type"]})).toArray();case 6:if(r=e.sent,!r.length){e.next=11;break}return e.abrupt("return",r[0]);case 11:return e.next=13,ke();case 13:i=e.sent,a=fe(i),e.prev=15,a.s();case 17:if((s=a.n()).done){e.next=30;break}if(o=s.value,c=me[o],c){e.next=22;break}return e.abrupt("continue",28);case 22:return e.next=24,c.pluginData.where("TMP_id").equals(t).and((function(e){return"Npc"===e["type"]||"Creature"===e["type"]})).toArray();case 24:if(l=e.sent,!l.length){e.next=27;break}return e.abrupt("return",l[0]);case 27:return e.abrupt("continue",28);case 28:e.next=17;break;case 30:e.next=35;break;case 32:e.prev=32,e.t0=e["catch"](15),a.e(e.t0);case 35:return e.prev=35,a.f(),e.finish(35);case 38:throw"NPC_NOT_FOUND";case 39:e.next=44;break;case 41:throw e.prev=41,e.t1=e["catch"](3),e.t1;case 44:case"end":return e.stop()}}),e,null,[[3,41],[15,32,35,38]])})));return function(t){return e.apply(this,arguments)}}(),Ce=function(){var e=Object(g["a"])(regeneratorRuntime.mark((function e(t){var n,r,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(me["activePlugin"]){e.next=2;break}throw"NO_INDEXEDDB_PLUGIN";case 2:return n=me["activePlugin"],e.prev=3,e.next=6,n.pluginData.where("TMP_topic").equals(t).and((function(e){return"Info"===e.type&&1!==e.quest_name})).toArray();case 6:return r=e.sent,e.next=9,n.pluginData.where("TMP_topic").equals(t).and((function(e){return"Info"===e.type&&1===e.quest_name})).toArray();case 9:return i=e.sent,i=i.length?i[0].text:"",e.abrupt("return",{name:i,entries:r});case 14:throw e.prev=14,e.t0=e["catch"](3),e.t0;case 17:case"end":return e.stop()}}),e,null,[[3,14]])})));return function(t){return e.apply(this,arguments)}}(),Pe=function(){var e=Object(g["a"])(regeneratorRuntime.mark((function e(t){var n,r,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(me["activePlugin"]){e.next=2;break}throw"NO_INDEXEDDB_PLUGIN";case 2:return n=me["activePlugin"],e.prev=3,e.next=6,n.pluginData.where({TMP_speaker_id:t}).toArray();case 6:return r=e.sent,i={},i.topics=Object(h["a"])(new Set(r.filter((function(e){return"Topic"===e.TMP_type})).map((function(e){return e.TMP_topic})))),i.greetings=Object(h["a"])(new Set(r.filter((function(e){return"Greeting"===e.TMP_type})).map((function(e){return e.TMP_topic})))),i.persuasions=Object(h["a"])(new Set(r.filter((function(e){return"Persuasion"===e.TMP_type})).map((function(e){return e.TMP_topic})))),e.abrupt("return",i);case 14:throw e.prev=14,e.t0=e["catch"](3),e.t0;case 17:case"end":return e.stop()}}),e,null,[[3,14]])})));return function(t){return e.apply(this,arguments)}}(),we=function(){var e=Object(g["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(me["activePlugin"]){e.next=2;break}throw"NO_INDEXEDDB_PLUGIN";case 2:return t=me["activePlugin"],e.prev=3,e.next=6,t.pluginData.orderBy("TMP_speaker_id").uniqueKeys((function(e){return e.filter((function(e){return""!==e}))})).then((function(e){n=e}));case 6:return e.abrupt("return",n);case 9:throw e.prev=9,e.t0=e["catch"](3),e.t0;case 12:case"end":return e.stop()}}),e,null,[[3,9]])})));return function(){return e.apply(this,arguments)}}(),Te=function(){var e=Object(g["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(me["activePlugin"]){e.next=2;break}throw"NO_INDEXEDDB_PLUGIN";case 2:return t=me["activePlugin"],e.prev=3,e.next=6,t.pluginData.where("type").equals("Dialogue").and((function(e){return"Journal"===e.TMP_type})).toArray();case 6:return n=e.sent,e.abrupt("return",n);case 10:throw e.prev=10,e.t0=e["catch"](3),e.t0;case 13:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(){return e.apply(this,arguments)}}(),xe=function(){var e=Object(g["a"])(regeneratorRuntime.mark((function e(t){var n,r,i,a,s,o,c,l,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,ke();case 2:n=e.sent,r=[],e.prev=4,i=fe(n),e.prev=6,i.s();case 8:if((a=i.n()).done){e.next=19;break}if(s=a.value,o=me[s],o){e.next=13;break}return e.abrupt("continue",17);case 13:return e.next=15,o.pluginData.where("type").equals("Info").and((function(e){return e["TMP_topic"]===t})).toArray();case 15:c=e.sent,r=[].concat(Object(h["a"])(r),[c]);case 17:e.next=8;break;case 19:e.next=24;break;case 21:e.prev=21,e.t0=e["catch"](6),i.e(e.t0);case 24:return e.prev=24,i.f(),e.finish(24);case 27:return l=me["activePlugin"],e.next=30,l.pluginData.where("type").equals("Info").and((function(e){return e["TMP_topic"]===t})).toArray();case 30:return u=e.sent,r=[].concat(Object(h["a"])(r),[u]),e.abrupt("return",r);case 35:throw e.prev=35,e.t1=e["catch"](4),e.t1;case 38:case"end":return e.stop()}}),e,null,[[4,35],[6,21,24,27]])})));return function(t){return e.apply(this,arguments)}}(),Oe=function(){var e=Object(g["a"])(regeneratorRuntime.mark((function e(t){var n,r,i,a,s,o,c,l,u,d;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",[]);case 2:return e.next=4,xe(t);case 4:if(n=e.sent,console.log("dialogue: ",n),n.flat(1).length){e.next=8;break}return e.abrupt("return",[]);case 8:return e.next=10,ke();case 10:if(r=e.sent,i=function(e,t){var r=n.flatMap((function(n){return n.filter((function(n){return n[e]===t}))}));if(!r.length)return!1;var i=r.at(-1),a=n.flatMap((function(e){return e.filter((function(e){return e.info_id===i.info_id}))}));return pe(pe({},i),{},{old_values:a.length>1?a.filter((function(e){return e&&e.TMP_dep})):[]})},a=i("prev_id",""),a){e.next=15;break}throw"NO_PREV_ID";case 15:s=[a];case 17:0,c=Object(h["a"])(new Set([i("prev_id",s.at(-1).info_id),i("info_id",s.at(-1).next_id)])),l=fe(r);try{for(d=function(){var e=u.value;o=c.find((function(t){return t.TMP_dep===e}))||o},l.s();!(u=l.n()).done;)d()}catch(p){l.e(p)}finally{l.f()}if(o=c.find((function(e){return e.TMP_is_active}))||o,!o){e.next=28;break}if(s.push(o),o.next_id){e.next=26;break}return e.abrupt("break",31);case 26:e.next=29;break;case 28:return e.abrupt("break",31);case 29:e.next=17;break;case 31:return e.abrupt("return",s);case 32:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Se=function(){var e=Object(g["a"])(regeneratorRuntime.mark((function e(t,n,r){var i,a,s,o,c,l,u,d,p,f,_;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,ye(r?"activePlugin":n);case 2:return s=e.sent,e.next=5,s.pluginData.count();case 5:if(o=e.sent,!o){e.next=10;break}return console.log("exists"),e.next=10,s.pluginData.clear();case 10:for(l in c=[],t)u=void 0,["Info","Dialogue"].includes(t[l].type)?("Dialogue"===t[l].type&&(i=t[l].dialogue_type),t[l].id&&(a=t[l].id),u=pe(pe({type:""},t[l]),{},{TMP_id:t[l].id||"",TMP_topic:a,TMP_type:i,TMP_info_id:t[l].info_id,TMP_prev_id:t[l].prev_id,TMP_next_id:t[l].next_id,TMP_speaker_id:t[l].speaker_id,TMP_speaker_cell:t[l].speaker_cell,TMP_speaker_faction:t[l].speaker_faction,TMP_speaker_class:t[l].speaker_class,TMP_speaker_rank:t[l].speaker_rank,TMP_dep:n,TMP_is_active:r,TMP_index:parseInt(l)})):u=pe(pe({type:""},t[l]),{},{TMP_id:t[l].id||"",TMP_topic:"",TMP_type:"",TMP_info_id:"",TMP_prev_id:"",TMP_next_id:"",TMP_speaker_id:"",TMP_speaker_cell:"",TMP_speaker_faction:"",TMP_speaker_class:"",TMP_speaker_rank:"",TMP_dep:n,TMP_is_active:r,TMP_index:parseInt(l)}),c.push(u);return e.next=14,s.transaction("rw",s.pluginData,Object(g["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,s.pluginData.bulkAdd(c).catch((function(e){console.log("Dexie ERROR on importing123"),console.log(e)}));case 2:case"end":return e.stop()}}),e)}))));case 14:if(!r){e.next=35;break}return e.next=17,ke();case 17:d=e.sent,p=fe(d),e.prev=19,p.s();case 21:if((f=p.n()).done){e.next=27;break}return _=f.value,e.next=25,ye(_);case 25:e.next=21;break;case 27:e.next=32;break;case 29:e.prev=29,e.t0=e["catch"](19),p.e(e.t0);case 32:return e.prev=32,p.f(),e.finish(32);case 35:return e.abrupt("return",me[r?"activePlugin":n]);case 36:case"end":return e.stop()}}),e,null,[[19,29,32,35]])})));return function(t,n,r){return e.apply(this,arguments)}}(),De={props:{speakerType:{type:String},speakerId:{type:String}},data:function(){return{speakerData:{}}},mounted:function(){var e=Object(g["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$store.dispatch("fetchNPCData",[this.speakerId]).then((function(e){t=e})).catch((function(e){console.log("err: ",e)}));case 2:this.speakerData=t||{};case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),computed:{getNpcFace:function(){var e=this.speakerData.npc_flags%2?"f":"m";switch(this.speakerData.race){case"Argonian":return"argonian-"+e+".png";case"High Elf":return"altmer-"+e+".png";case"Dark Elf":return"dunmer-"+e+".png";case"Breton":return"breton-"+e+".png";case"Wood Elf":return"bosmer-"+e+".png";case"Imperial":return"imperial-"+e+".png";case"Khajiit":return"khajiit-"+e+".png";case"Nord":return"nord-"+e+".png";case"Orc":return"orc-"+e+".png";case"Redguard":return"redguard-"+e+".png";default:return""}}},methods:{openDialogueModal:function(){this.$store.commit("setDialogueModal",this.speakerId)}}},Ee=De,Me=(n("076c"),Object(u["a"])(Ee,oe,ce,!1,null,null,null)),Fe=Me.exports,Ie={components:{Icon:k["a"],DialogueFrameCard:Fe},data:function(){return{speakerTypes:["speaker_id"],speakerSearch:""}},computed:{getNPCs:function(){return this.$store.getters["getAllNpcs"]},getSpeakerIdLength:function(){return this.$store.getters["getDialogueSpeaker"](["speaker_id"]).length||""},getSpeakerCellLength:function(){return this.$store.getters["getDialogueSpeaker"](["speaker_cell"]).length||""},getSpeakerFactionLength:function(){return this.$store.getters["getDialogueSpeaker"](["speaker_faction"]).length||""},getSpeakerClassLength:function(){return this.$store.getters["getDialogueSpeaker"](["speaker_class"]).length||""},getSpeakerRaceLength:function(){return this.$store.getters["getDialogueSpeaker"](["speaker_rank"]).length||""},getDialogueGlobalExist:function(){return this.$store.getters["getDialogueGlobalExist"]}},methods:{toggleType:function(e){this.speakerTypes.includes(e)?this.speakerTypes=this.speakerTypes.filter((function(t){return t!=e})):this.speakerTypes.push(e)},openClassicView:function(){this.$store.commit("setClassicView",!0)},addDialogue:function(){this.$store.commit("setPrimaryModal","NewDialogue")},openGeneric:function(){this.$store.commit("setDialogueModal","Global Dialogue")}}},Ne=Ie,je=(n("1d5c"),Object(u["a"])(Ne,ae,se,!1,null,null,null)),Ae=je.exports,Re=function(){var e=this,t=e._self._c;return t("div",{staticClass:"sidebar"},[t("JournalFrame",{directives:[{name:"show",rawName:"v-show",value:"Journal"===e.getSidebarActive,expression:"getSidebarActive === 'Journal'"}],key:4}),t("HeaderFrame",{directives:[{name:"show",rawName:"v-show",value:"Header"===e.getSidebarActive,expression:"getSidebarActive === 'Header'"}],key:5}),t("SidebarFactions",{directives:[{name:"show",rawName:"v-show",value:"Factions"===e.getSidebarActive,expression:"getSidebarActive === 'Factions'"}],key:6})],1)},qe=[],Le=function(){var e=this,t=e._self._c;return t("div",{staticClass:"journal-frame"},[t("div",{staticClass:"journal-frame__header"},[t("div",{staticClass:"frame-title"},[e._v("Header")])]),t("div",{staticClass:"header-content"},[t("span",{staticClass:"modal-field__name"},[e._v(" Plugin name: ")]),t("div",{staticClass:"header-content__row"},[t("label",{staticClass:"modal-field modal-field_dark"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"name"}],staticClass:"modal-field__input",attrs:{name:"speaker-name",autocomplete:"off",placeholder:"Type plugin name"},domProps:{value:e.name},on:{input:function(t){t.target.composing||(e.name=t.target.value)}}})]),t("button",{staticClass:"modal-button modal-button_dark",class:{"modal-button_dark-active":"ESP"===e.file_type.toUpperCase()},on:{click:function(t){e.file_type="Esp"}}},[e._v("\n        ESP\n      ")]),t("button",{staticClass:"modal-button modal-button_dark",class:{"modal-button_dark-active":"ESM"===e.file_type.toUpperCase()},on:{click:function(t){e.file_type="Esm"}}},[e._v("\n        ESM\n      ")])]),t("div",{staticClass:"header-content__row"},[t("label",{staticClass:"modal-field modal-field_dark"},[t("span",{staticClass:"modal-field__name"},[e._v(" Version: ")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.version,expression:"version"}],staticClass:"modal-field__input",attrs:{name:"speaker-name",autocomplete:"off",placeholder:"Type version"},domProps:{value:e.version},on:{input:function(t){t.target.composing||(e.version=t.target.value)}}})]),t("label",{staticClass:"modal-field modal-field_dark"},[t("span",{staticClass:"modal-field__name"},[e._v(" Author: ")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.author,expression:"author"}],staticClass:"modal-field__input",attrs:{name:"speaker-name",autocomplete:"off",placeholder:"Type author"},domProps:{value:e.author},on:{input:function(t){t.target.composing||(e.author=t.target.value)}}})])]),t("label",{staticClass:"modal-field modal-field_dark"},[t("span",{staticClass:"modal-field__name"},[e._v(" Description: ")]),t("textarea",{directives:[{name:"model",rawName:"v-model",value:e.description,expression:"description"}],staticClass:"modal-field__input modal-field__input_textarea",attrs:{name:"speaker-name",autocomplete:"off",placeholder:"Type description"},domProps:{value:e.description},on:{input:function(t){t.target.composing||(e.description=t.target.value)}}})]),t("span",{staticClass:"modal-field__name"},[e._v(" Dependencies: ")]),t("div",{staticClass:"header-dependencies"},[t("draggable",{tag:"transition-group",attrs:{tag:"tbody",list:e.dependencies,name:e.drag?null:"flip-list",handle:".grab","scroll-sensitivity":500,animation:"200"},on:{start:function(t){e.drag=!0},end:function(t){e.drag=!1}}},e._l(e.dependencies,(function(n){return t("div",{key:n[0],staticClass:"header-dependencies__item"},[t("span",[e._v(e._s(n[0]))]),t("icon",{staticClass:"grab",attrs:{name:"grip-horizontal",scale:"1"}})],1)})),0)],1),t("div",{staticClass:"header-buttons"},[t("button",{staticClass:"modal-button header-buttons__button",on:{click:e.saveHeader}},[e._v("\n        Save\n      ")]),t("button",{staticClass:"modal-button header-buttons__button",on:{click:e.cancelChanges}},[e._v("\n        Cancel\n      ")])])])])},$e=[],He=n("b76a"),Ge=n.n(He),Be={data:function(){return{name:"",version:"",file_type:"",author:"",description:"",dependencies:[],drag:!1}},watch:{getActiveHeader:function(e){var t=e;this.version=t.version,this.author=t.author,this.file_type=t.file_type,this.description=t.description,this.dependencies=JSON.parse(JSON.stringify(t.masters))}},computed:{getActiveHeader:function(){return this.$store.getters["getActiveHeader"]},getActivePluginTitle:function(){return this.getActiveHeader.TMP_dep}},components:{Icon:k["a"],draggable:Ge.a},methods:{addQuest:function(){this.$store.commit("setQuestCreateModal",!0)},saveHeader:function(){var e=JSON.parse(JSON.stringify(this.getActiveHeader));e.version=this.version,e.author=this.author,e.file_type=this.file_type,e.description=this.description,e.masters=this.dependencies,console.log(e),this.$store.commit("setActivePluginTitle",this.name)},cancelChanges:function(){this.version=this.getActiveHeader.version,this.author=this.getActiveHeader.author,this.file_type=this.getActiveHeader.file_type,this.description=this.getActiveHeader.description,this.dependencies=this.getActiveHeader.masters,this.name=this.getActivePluginTitle}}},Je=Be,Ve=(n("d6da"),Object(u["a"])(Je,Le,$e,!1,null,null,null)),Ue=Ve.exports,Qe=function(){var e=this,t=e._self._c;return t("div",{staticClass:"journal-frame"},[t("div",{staticClass:"journal-frame__header"},[t("div",{staticClass:"frame-title"},[e._v("Factions")]),t("div",{staticClass:"journal-frame__controls"},[t("div",{staticClass:"add-quest",on:{click:function(t){return e.addQuest()}}},[e._v("\n            New "),t("icon",{staticClass:"add-quest__button",attrs:{name:"plus-circle",scale:"1"}})],1)])]),t("div",{staticClass:"header-content"},e._l(e.getFactions,(function(n){return t("div",{key:n.id,staticClass:"faction"},[t("h3",[e._v(e._s(n.name))])])})),0)])},We=[],ze={data:function(){return{}},watch:{},computed:{getFactions:function(){return this.$store.getters["getFactions"]}},components:{Icon:k["a"],draggable:Ge.a},methods:{}},Ke=ze,Xe=(n("8777"),Object(u["a"])(Ke,Qe,We,!1,null,null,null)),Ye=Xe.exports,Ze={components:{JournalFrame:S,HeaderFrame:Ue,SidebarFactions:Ye},computed:{getSidebarActive:function(){return this.$store.getters["getSidebarActive"]}}},et=Ze,tt=(n("7e0b"),Object(u["a"])(et,Re,qe,!1,null,null,null)),nt=tt.exports,rt=function(){var e=this,t=e._self._c;return t("div",{staticClass:"workspace-controls"},[t("div",{staticClass:"workspace-controls__button",class:{"workspace-controls__button_active":"Journal"===e.getSidebarActive},on:{click:function(t){return e.toggleSidebarActive("Journal")}}},[t("icon",{staticClass:"icon-controls",attrs:{name:"book-open",scale:"2"}}),t("span",[e._v("Journal")])],1),t("div",{staticClass:"workspace-controls__button",class:{"workspace-controls__button_active":"Header"===e.getSidebarActive},on:{click:function(t){return e.toggleSidebarActive("Header")}}},[t("icon",{staticClass:"icon-controls",attrs:{name:"file-alt",scale:"2"}}),t("span",[e._v("Header")])],1),t("div",{staticClass:"workspace-controls__button workspace-controls__button_wip",class:{"workspace-controls__button_active":"Factions"===e.getSidebarActive},attrs:{disabled:""}},[t("icon",{staticClass:"icon-controls",attrs:{name:"users",scale:"2"}}),t("span",[e._v("Factions")])],1),t("div",{staticClass:"workspace-controls__button workspace-controls__button_wip",attrs:{disabled:""}},[t("icon",{staticClass:"icon-controls",attrs:{name:"book",scale:"2"}}),t("span",[e._v("Books")])],1),t("div",{staticClass:"workspace-controls__button workspace-controls__button_wip",attrs:{disabled:""}},[t("icon",{staticClass:"icon-controls",attrs:{name:"code",scale:"2"}}),t("span",[e._v("Scripts")])],1)])},it=[],at={components:{Icon:k["a"]},methods:{toggleSidebarActive:function(e){this.$store.commit("toggleSidebarActive",e)}},computed:{getSidebarActive:function(){return this.$store.getters["getSidebarActive"]}}},st=at,ot=(n("5963"),Object(u["a"])(st,rt,it,!1,null,null,null)),ct=ot.exports,lt={components:{JournalFrame:S,DialogueFrame:Ae,WorkspaceControls:ct,Sidebar:nt},computed:{getSidebar:function(){return""!==this.$store.getters["getSidebarActive"]}}},ut=lt,dt=(n("de42"),Object(u["a"])(ut,re,ie,!1,null,null,null)),pt=dt.exports,ft=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"toolbar"},[t("div",{staticClass:"file-controls"},[t("ToolBarOpen")],1),e.getTitle?t("div",{staticClass:"header-controls"},[t("div",{staticClass:"header-controls__title"},[e._v("\n        "+e._s(e.getTitle)+"\n      ")]),t("div",{staticClass:"header-controls__info"})]):e._e()]),t("div",{staticClass:"pseudoheader"})])},_t=[],gt=function(){var e=this,t=e._self._c;return t("a",{staticClass:"open-btn",attrs:{href:e.getDownloadLink,download:e.getPluginTitle+".json"}},[t("icon",{attrs:{name:"save",scale:"1.3"}})],1)},mt=[],vt=n("3835"),ht=(n("ffc1"),{components:{Icon:k["a"]},computed:{getPluginTitle:function(){return this.$store.getters["getActivePluginTitle"]},getPluginData:function(){return this.$store.getters["getActivePlugin"]&&this.$store.getters["getActivePlugin"].map((function(e){return Object.fromEntries(Object.entries(e).filter((function(e){var t=Object(vt["a"])(e,1),n=t[0];return!n.includes("TMP_topic")&&!n.includes("TMP_type")&&!n.includes("old_values")})))}))},getDownloadLink:function(){return"data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(this.getPluginData))}},methods:{testPlugin:function(){}}}),yt=ht,kt=(n("a372"),Object(u["a"])(yt,gt,mt,!1,null,null,null)),bt=kt.exports,Ct={components:{ToolBarOpen:N,ToolBarSave:bt},computed:{getTitle:function(){return this.$store.getters["getActiveHeader"].TMP_dep}}},Pt=Ct,wt=(n("c876"),Object(u["a"])(Pt,ft,_t,!1,null,null,null)),Tt=wt.exports,xt={components:{ToolBar:Tt,CWorkspaceDesk:pt}},Ot=xt,St=(n("5605"),Object(u["a"])(Ot,te,ne,!1,null,null,null)),Dt=St.exports,Et=function(){var e=this,t=e._self._c;return t("div",{staticClass:"dialogue"},[t("div",{staticClass:"dialogue-answers"},[e.currentTopic?t("div",{staticClass:"dialogue-answers__header"},[e.editMode?t("div",{staticClass:"dialogue-answers__add",on:{click:e.addEntry}},[e._v("\n        Add entry\n      ")]):e._e(),t("transition",{staticClass:"dialogue-answers__frame",style:{width:"100%"},attrs:{name:"fadeHeight",mode:"out-in"}},[t("span",{directives:[{name:"show",rawName:"v-show",value:e.currentTopic.trim().length,expression:"currentTopic.trim().length"}]},[e._v(e._s(e.currentTopic))])]),t("div",{staticClass:"dialogue-answers__edit"},[t("icon",{staticClass:"icon_gold",attrs:{name:"list",color:"#E1FF00",scale:"1"},on:{click:e.openClassicView}}),e.editMode?t("div",[t("icon",{staticClass:"icon_gold",attrs:{name:"ban",color:"#E1FF00",scale:"1"},on:{click:function(t){e.editMode=!1,e.editedEntry=""}}})],1):t("icon",{staticClass:"icon_gold",attrs:{name:"pen",color:"#E1FF00",scale:"1"},on:{click:function(t){e.editMode=!0}}})],1)],1):e._e(),t("div",[t("transition-group",{staticClass:"dialogue-answers__frame",style:{width:"100%"},attrs:{name:"fadeHeight",mode:"out-in"}},[e._l(e.currentAnswers,(function(n){return t("div",{key:n.info_id,class:{"highlight-even":!e.editMode}},[e.editMode?e._e():t("div",{staticClass:"dialogue-answers-answer__above"}),e.editMode?t("div",{staticClass:"dialogue-answers-answer__above-add"},[t("button",{staticClass:"entry-control-button",on:{click:function(t){return e.addEntry([n.prev_id,n.info_id])}}},[t("icon",{staticClass:"entry-control-button__icon",attrs:{name:"plus",color:"#E1FF00",scale:"1"}})],1),Object.keys(e.getClipboardDialogue).length?t("button",{staticClass:"entry-control-button",on:{click:function(t){return e.pasteDialogueFromClipboard([n.prev_id,n.info_id])}}},[t("icon",{staticClass:"entry-control-button__icon",attrs:{name:"clipboard",color:"#E1FF00",scale:"1"}})],1):e._e()]):e._e(),t("form",{staticClass:"dialogue-answers-answer-wrapper",on:{submit:function(t){return t.preventDefault(),e.editDialogue.apply(null,arguments)}}},[t("div",{staticClass:"dialogue-answers-answer",class:{"dialogue-answers-answer_modified":n.old_values&&n.old_values.length,"dialogue-answers-answer_edit":e.editMode}},[n.old_values&&n.old_values.length?t("div",{staticClass:"dialogue-answers-answer-modified"},[e._v("\n                * Modified in "+e._s(n.old_values.slice(-1)[0].TMP_dep)+"\n                "),e.checkDirtied(n.old_values.slice(-1)[0],n)?t("span",{staticClass:"dialogue-answers-answer-modified_dirty"},[e._v("\n                  (possibly dirtied by CS)\n                ")]):e._e()]):e._e(),e._e(),t("DialogueEntryFilters",{attrs:{answer:n,speaker:e.speaker,editMode:e.editMode}}),e.editedEntry!==n.info_id?t("div",{staticClass:"dialogue-answers-answer__text",domProps:{innerHTML:e._s(e.getHyperlinkedAnswer(n.text))},on:{click:function(t){return e.handleAnswerClick(t)}}}):t("textarea",{staticClass:"dialogue-entry-textarea",attrs:{name:"entryText"},domProps:{textContent:e._s(n.text)}}),t("DialogueEntryResults",{attrs:{editMode:e.editMode,code:e.getLanguage(n.result,"Lua (MWSE)"),language:"Lua (MWSE)"}}),t("DialogueEntryResults",{attrs:{editMode:e.editMode,code:e.getLanguage(n.result,"MWScript"),language:"MWScript"}}),e._e()],1),e.editMode&&e.editedEntry!==n.info_id?t("icon",{staticClass:"icon_gold",attrs:{name:"pen",color:"#E1FF00",scale:"1"},on:{click:function(t){e.editedEntry=n.info_id}}}):e._e(),e.editMode&&e.editedEntry==n.info_id?t("div",{staticClass:"entry-edit-controls"},[t("button",{attrs:{type:"submit"}},[t("icon",{staticClass:"icon_gold",attrs:{name:"save",color:"#E1FF00",scale:"1"}})],1),t("icon",{staticClass:"icon_gold",attrs:{name:"copy",color:"#E1FF00",scale:"1"},on:{click:function(t){return t.preventDefault(),e.setClipboard(n)}}}),t("icon",{staticClass:"icon_gold",attrs:{name:"ban",color:"#E1FF00",scale:"1"},on:{click:function(t){t.preventDefault(),e.editedEntry=""}}}),t("icon",{staticClass:"icon_gold",attrs:{name:"trash",color:"#E1FF00",scale:"1"},on:{click:function(t){return t.preventDefault(),e.deleteEntry(n.info_id)}}})],1):e._e()],1)])})),e.editMode?e._e():t("div",{key:"separator",staticClass:"dialogue-answers-answer__above dialogue-answers-answer__above_no-margin"}),e.editMode?t("div",{key:"add-lowest",staticClass:"dialogue-answers-answer__above-add"},[t("button",{staticClass:"entry-control-button",on:{click:function(t){return t.preventDefault(),e.addEntry([e.getLastEntryId,""])}}},[t("icon",{staticClass:"entry-control-button__icon",attrs:{name:"plus",color:"#E1FF00",scale:"1"}})],1),Object.keys(e.getClipboardDialogue).length?t("button",{staticClass:"entry-control-button",on:{click:function(t){return t.preventDefault(),e.pasteDialogueFromClipboard([e.getLastEntryId,""])}}},[t("icon",{staticClass:"entry-control-button__icon",attrs:{name:"clipboard",color:"#E1FF00",scale:"1"}})],1):e._e()]):e._e()],2)],1),e.getOrderedEntries.error_text?t("div",{staticClass:"dialogue-answers__info dialogue-answers__info_error"},[e._v("\n      "+e._s(e.getOrderedEntries.error_text)+"\n    ")]):e._e(),e.infoMessage?t("div",{staticClass:"dialogue-answers__info"},[e._v("\n      "+e._s(e.infoMessage)+"\n    ")]):e._e()]),t("div",{staticClass:"dialogue-questions"},[e.dialogue.greetings.length?t("div",{staticClass:"dialogue-questions__container"},e._l(e.dialogue.greetings,(function(n,r){return t("div",{key:r,staticClass:"dialogue-questions__topic",on:{click:function(t){return e.setCurrentAnswers(n,"Greeting")}}},[e._v("\n        "+e._s(n)+"\n      ")])})),0):e._e(),e.dialogue.persuasions.length?t("div",{staticClass:"dialogue-questions__container"},e._l(e.dialogue.persuasions,(function(n,r){return t("div",{key:r,staticClass:"dialogue-questions__topic",on:{click:function(t){return e.setCurrentAnswers(n,"Persuasion")}}},[e._v("\n        "+e._s(n)+"\n      ")])})),0):e._e(),e._l(e.dialogue.topics,(function(n,r){return t("div",{key:r,staticClass:"dialogue-questions__topic",on:{click:function(t){return e.setCurrentAnswers(n,"Topic")}}},[e._v("\n      "+e._s(n)+"\n    ")])}))],2)])},Mt=[],Ft=(n("a481"),function(){var e=this,t=e._self._c;return e.code?t("div",[t("div",{staticClass:"results",class:{results_lua:"Lua (MWSE)"===e.language}},[t("span",{staticClass:"script-language",class:{"script-language_lua":"Lua (MWSE)"===e.language}},[e._v(e._s(e.language))]),t("CodeEditor",{attrs:{read_only:!e.editMode,hide_header:!0,height:"100%",width:"100%",font_size:"14px",border_radius:"0"},model:{value:e.luaCode,callback:function(t){e.luaCode=t},expression:"luaCode"}})],1)]):e._e()}),It=[],Nt=n("f314"),jt={components:{CodeEditor:Nt["a"]},props:{code:{type:String},language:{type:String},editMode:{type:Boolean}},data:function(){return{luaCode:""}},beforeMount:function(){this.luaCode=this.code},methods:{highlighterLua:function(e){return highlight(e,languages.lua)},highlighterBasic:function(e){return highlight(e,languages.javascript)}}},At=jt,Rt=(n("1451"),Object(u["a"])(At,Ft,It,!1,null,null,null)),qt=Rt.exports,Lt=function(){var e=this,t=e._self._c;return t("div",{staticClass:"dialogue-filters",on:{dragover:function(e){e.preventDefault()},dragenter:function(t){return t.preventDefault(),e.handleDragEnter.apply(null,arguments)},dragleave:e.handleDragLeave,drop:e.handleDrop}},[e._l(e.onlyFilters?[]:e.getOtherSpeakers,(function(n){return t("div",{key:n.value+n.type,staticClass:"dialogue-filters__filter dialogue-filters__filter_speaker",attrs:{tabindex:"0"},on:{focus:function(t){return e.handleFilter(e.filter)},focusout:function(t){return e.handleFilter({})}}},[t("span",{staticClass:"filter__if"},[e._v("if ")]),t("span",{staticClass:"filter__function"},[e._v(e._s(n.type)+" ")]),t("span",{staticClass:"filter__comparison"},[e._v("== ")]),t("span",{staticClass:"filter__value"},[e._v(e._s(n.value))]),t("span",[e.editMode?t("icon",{staticClass:"filter__edit",attrs:{name:"pen",scale:"1"},on:{click:function(t){return t.stopPropagation(),e.editFilter({filter_comparison:"Equal",filter_type:n.type,value:{Integer:n.value}},n.type)}}}):e._e()],1)])})),!e.onlyFilters&&e.answer.data.disposition>0?t("div",{key:"disposition",staticClass:"dialogue-filters__filter dialogue-filters__filter_disp",attrs:{tabindex:"0"},on:{focus:function(t){return e.handleFilter(e.filter)},focusout:function(t){return e.handleFilter({})}}},[t("span",{staticClass:"filter__if"},[e._v("if ")]),t("span",{staticClass:"filter__function"},[e._v("Disposition ")]),t("span",{staticClass:"filter__comparison"},[e._v("> ")]),t("span",{staticClass:"filter__value"},[e._v(e._s(e.answer.data.disposition))]),t("span",[e.editMode?t("icon",{staticClass:"filter__edit",attrs:{name:"pen",scale:"1"},on:{click:function(t){return t.stopPropagation(),e.editFilter({filter_comparison:"Greater",filter_type:"Disposition",value:{Integer:e.speakerType.value}},"Disposition")}}}):e._e()],1)]):e._e(),e._l(e.getFiltersByInfoId,(function(n,r){return t("div",{key:r,staticClass:"filter-wrapper"},[t("div",{staticClass:"dialogue-filters__filter",attrs:{tabindex:"0"},on:{click:function(t){return e.handleFilter(n)},focusout:e.removeHighlight}},[t("span",{staticClass:"filter__if"},[e._v("if ")]),t("span",{staticClass:"filter__function"},[e._v(e._s("Function"===n.filter_type?n.filter_function:n.filter_type)+" ")]),t("span",{staticClass:"filter__id"},[e._v(e._s(n.id)+" ")]),t("span",{staticClass:"filter__comparison"},[e._v(e._s(e.parseComparison(n.filter_comparison))+"\n      ")]),t("span",{staticClass:"filter__value"},[e._v(e._s(Object.values(n.value)[0]))]),t("span",[e.editMode?t("icon",{staticClass:"filter__edit",attrs:{name:"pen",scale:"1"},on:{click:function(t){return t.stopPropagation(),e.editFilter(n,r)}}}):e._e()],1)]),t("div",{staticClass:"filter-delete",on:{click:function(t){return t.stopPropagation(),e.deleteFilter(n.slot)}}},[e.editMode?t("icon",{staticClass:"filter-delete__icon",attrs:{name:"times",scale:"0.8"}}):e._e()],1)])})),t("div",{directives:[{name:"show",rawName:"v-show",value:e.newFilterType,expression:"newFilterType"}],key:"tempFilter",staticClass:"dialogue-filters__filter",attrs:{tabindex:"0"}},[t("span",{staticClass:"filter__if"},[e._v("if ")]),t("span",{staticClass:"filter__function"},[e._v(e._s(e.newFilterType)+" ")]),t("span",{staticClass:"filter__id"},[e._v(e._s(e.newFilterTopic)+" ")]),t("span",{staticClass:"filter__comparison"},[e._v("?\n    ")]),t("span",{staticClass:"filter__value"},[e._v(e._s(e.newFilterIndex))]),t("span",[e.editMode?t("icon",{staticClass:"filter__edit",attrs:{name:"pen",scale:"1"},on:{click:function(t){return t.stopPropagation(),e.editFilter(e.filter,e.index)}}}):e._e()],1),t("div",{staticClass:"comparisons__overlay"},[t("div",{ref:"comparisons",staticClass:"comparisons",attrs:{tabindex:"0"},on:{click:function(e){e.preventDefault()},mouseleave:e.removeHighlight,focusout:e.removeTempFilter}},e._l(e.comparisons,(function(n){return t("span",{key:n.id,staticClass:"comparisons__item",on:{mouseover:function(t){return e.comparisonOver(n.id)},click:function(t){return e.addDropFilter(n.id)}}},[e._v("\n          "+e._s(n.text)+"\n        ")])})),0)])]),e.dragOver&&!e.newFilterType?t("div",{key:"newFilter",staticClass:"dialogue-filters__filter no-pointer-events",attrs:{tabindex:"0"}},[t("span",{staticClass:"filter__function"},[e._v("New filter...")])]):e._e(),!e.editMode||e.newFilterType||e.dragOver?e._e():t("icon",{staticClass:"icon_gray",attrs:{name:"plus-circle",scale:"1.5"},on:{click:function(t){return e.addFilter()}}})],2)},$t=[],Ht={props:{answer:{type:Object},speaker:{type:String},editMode:{type:Boolean},onlyFilters:{type:Boolean}},components:{Icon:k["a"]},data:function(){return{newFilterTopic:"",newFilterIndex:"",newFilterType:"",dragOver:!1,showComparisons:!1,filterReactivityTrigger:0,comparisons:[{id:"Less",text:"<"},{id:"LesserEqual",text:"<="},{id:"Equal",text:"=="},{id:"NotEqual",text:"!="},{id:"GreaterEqual",text:">="},{id:"Greater",text:">"}]}},computed:{getFiltersByInfoId:function(){return this.answer.filters},getOtherSpeakers:function(){var e=this;return[{type:"Speaker ID",value:this.answer.speaker_id},{type:"Speaker Cell",value:this.answer.speaker_cell},{type:"Speaker Faction",value:this.answer.speaker_faction},{type:"Speaker Class",value:this.answer.speaker_class},{type:"Speaker Sex",value:"Any"!==this.answer.data.speaker_sex?this.answer.data.speaker_sex:""},{type:"Speaker Rank",value:-1!==this.answer.data.speaker_rank?this.answer.data.speaker_rank:""},{type:"Speaker Race",value:this.answer.speaker_rank},{type:"Player Rank",value:-1!==this.answer.data.player_rank?this.answer.data.player_rank:""},{type:"Player Faction",value:this.answer.player_faction}].filter((function(t){return t.value&&t.value!==e.speaker}))}},methods:{handleFilter:function(e){"JournalType"===e.filter_function?(this.$store.commit("setSidebarActive","Journal"),this.$store.commit("setJournalHighlight",e)):this.removeHighlight()},removeHighlight:function(){this.$store.commit("setJournalHighlight",{})},addFilter:function(){this.$store.commit("setSelectedFilter",{}),this.$store.commit("setSelectedInfoId",this.answer.info_id),this.$store.commit("setSelectedFilterIndex",""),this.$store.commit("setPrimaryModal","NewFilter"),this.filterReactivityTrigger++},deleteFilter:function(e){this.$store.commit("deleteDialogueFilter",[this.answer.info_id,e]),this.filterReactivityTrigger++},addDropFilter:function(e){if("Journal"===this.newFilterType){var t={filter_comparison:e,filter_function:"JournalType",filter_type:"Journal",id:this.newFilterTopic,value:{Integer:this.newFilterIndex}};this.$store.commit("addFilter",[t,this.answer.info_id])}this.removeTempFilter(),this.filterReactivityTrigger++},editFilter:function(e,t){this.$store.commit("setSelectedFilter",e),this.$store.commit("setSelectedInfoId",this.answer.info_id),this.$store.commit("setSelectedFilterIndex",t),this.$store.commit("setPrimaryModal","NewFilter")},parseComparison:function(e){switch(e){case"Equal":return"==";case"GreaterEqual":return">=";case"LesserEqual":return"<=";case"Less":return"<";case"Greater":return">";case"NotEqual":return"!=";default:return e}},handleDragLeave:function(e){this.dragOver=!1},handleDragEnter:function(e){this.dragOver=!0},handleDrop:function(){var e=Object(g["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("Journal"!==t.dataTransfer.getData("type")){e.next=8;break}return this.dragOver=!1,this.newFilterTopic=t.dataTransfer.getData("topic"),this.newFilterIndex=t.dataTransfer.getData("disposition"),this.newFilterType=t.dataTransfer.getData("type"),this.showComparisons=!0,e.next=7,new Promise((function(e){return setTimeout(e,100)}));case 7:this.$refs.comparisons.focus();case 8:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),comparisonOver:function(e){var t={id:this.newFilterTopic,value:{Integer:this.newFilterIndex},filter_comparison:e};this.$store.commit("setJournalHighlight",t)},removeTempFilter:function(){this.newFilterIndex="",this.newFilterTopic="",this.newFilterType=""}}},Gt=Ht,Bt=(n("e80e"),Object(u["a"])(Gt,Lt,$t,!1,null,null,null)),Jt=Bt.exports;function Vt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ut(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Vt(Object(n),!0).forEach((function(t){Object(le["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Vt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Qt(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=Wt(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,o=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){o=!0,a=e},f:function(){try{s||null==n.return||n.return()}finally{if(o)throw a}}}}function Wt(e,t){if(e){if("string"===typeof e)return zt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?zt(e,t):void 0}}function zt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Kt={components:{Icon:k["a"],DialogueEntryResults:qt,DialogueEntryFilters:Jt},props:{speaker:String},data:function(){return{currentTopic:"",editMode:!1,showDependencies:!0,editedEntry:"",topicType:"",infoMessage:"",dialogue:{greetings:[],persuasions:[],topics:[]},orderedEntries:[]}},mounted:function(){var e=Object(g["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.editMode=!1;case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),computed:{getOrderedEntries:function(){return this.$store.getters["getOrderedEntriesByTopic"]([this.currentTopic,"Topic"])},currentAnswers:function(){var e,t=this;return e="Global Dialogue"!==this.speaker?this.orderedEntries.filter((function(e){return e.TMP_topic===t.currentTopic})).filter((function(e){return[e["speaker_id"],e["speaker_cell"],e["speaker_faction"],e["speaker_class"],e["speaker_rank"]].includes(t.speaker)})):this.orderedEntries.filter((function(e){return e.TMP_topic===t.currentTopic})).filter((function(e){return!e["speaker_id"]&&!e["speaker_cell"]&&!e["speaker_faction"]&&!e["speaker_class"]&&!e["speaker_rank"]})),e},getClipboardDialogue:function(){return this.$store.getters["getClipboardDialogue"]},getSpeakerType:function(){var e=this;return this.currentAnswers[0]?Object.keys(this.currentAnswers[0]).find((function(t){return e.currentAnswers[0][t]===e.speaker})):""},getLastEntryId:function(){return this.currentAnswers.at(-1).info_id}},methods:{setClipboard:function(){var e=Object(g["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.$store.commit("setClipboardDialogue",[t,this.speaker]),this.infoMessage='Entry "'.concat(t.text.slice(0,20)).concat(t.text.length>20?"...":"",'" by speaker "').concat(t.speaker_id,'" copied to clipboard.'),navigator.clipboard.writeText(t.text),e.next=5,new Promise((function(e){return setTimeout(e,2500)}));case 5:this.infoMessage="";case 6:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),addEntry:function(e){this.currentTopic&&(e||(e=this.$store.getters["getBestOrderLocationForNpc"]([this.speaker,this.currentTopic,this.topicType,this.getSpeakerType])),console.log(e),e[0]?this.$store.commit("addDialogue",[this.getSpeakerType,this.speaker,this.currentTopic,this.topicType,e[0],"next","New entry"]):!e[0]&&e[1]&&this.$store.commit("addDialogue",[this.getSpeakerType,this.speaker,this.currentTopic,this.topicType,e[1],"prev","New entry"]))},editDialogue:function(){this.$store.commit("editDialogueEntry",[this.editedEntry,event.target.elements.entryText.value]),this.editedEntry=""},setCurrentAnswers:function(){var e=Object(g["a"])(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.topicType="Topic",this.currentTopic=" ",e.next=4,new Promise((function(e){return setTimeout(e,160)}));case 4:this.topicType=n,this.currentTopic=t;case 6:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}(),deleteEntry:function(e){this.$store.commit("deleteDialogueEntry",e)},getSpeakerData:function(e){return this.$store.getters["getDialogueBySpeaker"]([this.speaker,e])},getLanguage:function(e,t){return e?"Lua (MWSE)"===t?e.split("\r\n").filter((function(e){return e.includes(";lua ")})).map((function(e){return e.replace(";lua ","")})).join("\r\n"):"MWScript"===t?e.split("\r\n").filter((function(e){return!e.includes(";lua ")})).join("\r\n"):void 0:""},checkDirtied:function(e,t){var n=Object.fromEntries(Object.entries(e).filter((function(e){var t=Object(vt["a"])(e,1),n=t[0];return!n.includes("_id")&&!n.includes("TMP_")&&!n.includes("old_values")}))),r=Object.fromEntries(Object.entries(t).filter((function(e){var t=Object(vt["a"])(e,1),n=t[0];return!n.includes("_id")&&!n.includes("TMP_")&&!n.includes("old_values")})));return JSON.stringify(n)===JSON.stringify(r)},handleAnswerClick:function(e){"dialogue-answers-answer__text_hyperlink"==e.target.className&&(this.setCurrentAnswers(e.target.innerText,"Topic"),this.currentTopic=e.target.innerText)},getHyperlinkedAnswer:function(e){var t,n=e,r=Qt(this.dialogue.topics);try{for(r.s();!(t=r.n()).done;){var i=t.value;n.includes(i)&&(n=n.replace(i,'<span class="dialogue-answers-answer__text_hyperlink">'.concat(i,"</span>")))}}catch(a){r.e(a)}finally{r.f()}return n},pasteDialogueFromClipboard:function(e){var t=Ut(Ut({},this.getClipboardDialogue),{},{speaker_id:this.speaker});this.$store.commit("pasteDialogue",[t,this.currentTopic,this.topicType,e[0],"next"])},openClassicView:function(){this.$store.commit("setClassicViewTopic",this.currentTopic),this.$store.commit("setClassicView",!0)}},watch:{speaker:function(){var e=Object(g["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.setCurrentAnswers("",""),this.currentTopic="",e.next=4,this.$store.dispatch("fetchTopicListByNPC",[this.speaker]);case 4:this.dialogue=e.sent;case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),currentTopic:function(){var e=Object(g["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.trim()){e.next=6;break}return e.next=3,this.$store.dispatch("fetchOrderedEntriesByTopic",[t]);case 3:this.orderedEntries=e.sent,e.next=7;break;case 6:this.orderedEntries=[];case 7:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}},Xt=Kt,Yt=(n("5b5b"),Object(u["a"])(Xt,Et,Mt,!1,null,null,null)),Zt=Yt.exports,en=function(){var e=this,t=e._self._c;return t("div",{staticClass:"modal"},[t("transition",{attrs:{name:"fade",appear:""}},[""!==e.triggerFade?t("div",{staticClass:"modal__overlay",attrs:{"data-custom-close":""},on:{mousedown:e.hideModals}},[t("transition",{attrs:{name:"slide",appear:""}},[""!==e.getModal?t("div",{staticClass:"modal__content",on:{mousedown:function(e){e.stopPropagation()}}},[t("div",{staticClass:"modal__content-wrapper"},[t("ModalContent"+e.modalType,{tag:"component"})],1)]):e._e()])],1):e._e()])],1)},tn=[],nn=function(){var e=this,t=e._self._c;return t("div",{staticClass:"frame-upload"},[t("h2",{staticClass:"modal__title"},[e._v("Upload your plugin and its masters")]),t("ToolbarReadFile"),t("div",{staticClass:"frame-upload-deps"},[e.getDependencies&&e.getDependencies.length>0?t("div",{staticClass:"frame-upload-deps__title"},[e._v("Requires:")]):e._e(),e._l(e.getDependencies,(function(n){return t("div",{key:n,staticClass:"frame-upload-deps__element"},[e._v("\n      "+e._s(n)+" "),t("ToolbarReadFile",{attrs:{dep:n}})],1)}))],2)],1)},rn=[],an={components:{ToolbarReadFile:p},computed:{getDependencies:function(){if(this.$store.getters["getActiveHeader"]&&this.$store.getters["getActiveHeader"].masters)return this.$store.getters["getActiveHeader"].masters.map((function(e){return e[0]}))}}},sn=an,on=(n("4bc1"),Object(u["a"])(sn,nn,rn,!1,null,null,null)),cn=on.exports,ln=function(){var e=this,t=e._self._c;return t("div",{staticClass:"frame-upload"},[t("h2",{staticClass:"modal__title"},[e._v("Create a new journal quest")]),t("div",{staticClass:"modal-content"},[t("form",{staticClass:"add-quest-form",on:{submit:function(t){return t.preventDefault(),e.createQuest()}}},[t("label",{staticClass:"modal-field"},[e.nameError?t("span",{key:e.index,staticClass:"error"},[e._v(e._s(e.nameError))]):e._e(),t("input",{directives:[{name:"model",rawName:"v-model",value:e.inputName,expression:"inputName"}],staticClass:"modal-field__input",attrs:{name:"quest-name",placeholder:"Quest name"},domProps:{value:e.inputName},on:{input:function(t){t.target.composing||(e.inputName=t.target.value)}}})]),t("label",{staticClass:"modal-field"},[e.idError?t("span",{key:e.index,staticClass:"error"},[e._v(e._s(e.idError))]):e._e(),t("input",{directives:[{name:"model",rawName:"v-model",value:e.inputId,expression:"inputId"}],staticClass:"modal-field__input",attrs:{name:"quest-id",placeholder:"Quest ID",required:""},domProps:{value:e.inputId},on:{input:function(t){t.target.composing||(e.inputId=t.target.value)}}})]),t("button",{staticClass:"modal-button",attrs:{type:"submit"}},[e._v("Create")])]),t("div",{staticClass:"modal-tip"},[e._v("Tip: to create a new journal line inside the same quest - just set the name same as the previous line and change the ID.")])])])},un=[],dn={data:function(){return{nameError:"",idError:"",inputName:"",inputId:""}},methods:{createQuest:function(){this.$store.commit("addJournalQuest",[this.inputId,this.inputName]),this.$store.commit("setPrimaryModal","")}},computed:{}},pn=dn,fn=(n("20e3"),Object(u["a"])(pn,ln,un,!1,null,null,null)),_n=fn.exports,gn=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"frame-upload"},[t("h2",{staticClass:"modal__title"},[e._v("Create a new dialogue")]),t("form",{staticClass:"add-dialogue-form",on:{submit:function(t){return t.preventDefault(),e.createTopic()}}},[e.speakerName||"Global"===e.speakerSelectedType.typeName?t("div",[t("div",{staticClass:"add-dialogue-label"},[t("span",[e._v("Add ")]),t("span",{staticClass:"add-dialogue-label-select",attrs:{tabindex:"0"},on:{focusout:function(t){e.speakerSelect=!1}}},[t("span",{staticClass:"speaker-change",on:{click:function(t){e.speakerSelect=!e.speakerSelect}}},[e._v("\n                "+e._s(e.dialogueSelectedType.typeName.toLowerCase())+"\n              ")]),t("transition",{attrs:{name:"fadeAppear"}},[e.speakerSelect?t("div",{staticClass:"add-dialogue-label-select-items"},e._l(e.dialogueTypes,(function(n){return t("div",{key:n,staticClass:"add-dialogue-label-select-items__item",on:{click:function(t){e.dialogueSelectedType=n,e.speakerSelect=!1}}},[e._v("\n                  "+e._s(n.typeName)+"\n                ")])})),0):e._e()])],1),t("span",[e._v(" to: ")]),t("span",{staticClass:"speaker-name"},[e._v(e._s("Global"===e.speakerSelectedType.typeName?"Global":e.speakerName)+".")]),t("a",{staticClass:"speaker-change",on:{click:function(t){e.speakerId="",e.speakerName=""}}},[e._v(e._s(" Change?"))])]),t("div",{staticClass:"topic-create-controls"},["Topic"===e.dialogueSelectedType.typeId?t("label",{staticClass:"modal-field"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.inputTopic,expression:"inputTopic"}],staticClass:"modal-field__input",attrs:{name:"dialogue-topic",placeholder:"Type ".concat("Topic"===e.dialogueSelectedType.typeId?"the":"a"," ").concat(e.dialogueSelectedType.typeName.toLowerCase()),autocomplete:"off",required:""},domProps:{value:e.inputTopic},on:{input:function(t){t.target.composing||(e.inputTopic=t.target.value)}}})]):e._e(),t("button",{staticClass:"modal-button",attrs:{type:"submit",disabled:!e.inputTopic}},[e._v("Create")])]),"Topic"===e.dialogueSelectedType.typeId?t("div",{staticClass:"found-names"},e._l(e.getTopics,(function(n){return t("div",{key:n.id,staticClass:"found-names-name",class:{"found-names-name_active":!n[0].TMP_dep},on:{click:function(t){t.preventDefault(),e.inputTopic=n[0].id}}},[e._v("\n            "+e._s(n[0].id)+"\n          ")])})),0):"Greeting"===e.dialogueSelectedType.typeId?t("div",{staticClass:"found-names"},e._l(e.greetings,(function(n){return t("div",{key:n,staticClass:"found-names-name",on:{click:function(t){t.preventDefault(),e.inputTopic=n}}},[e._v("\n            "+e._s(n)+"\n          ")])})),0):"Persuasion"===e.dialogueSelectedType.typeId?t("div",{staticClass:"found-names"},e._l(e.persuasions,(function(n){return t("div",{key:n,staticClass:"found-names-name",on:{click:function(t){t.preventDefault(),e.inputTopic=n}}},[e._v("\n            "+e._s(n)+"\n          ")])})),0):e._e()]):t("div",[t("div",{staticClass:"add-dialogue-label"},[e._v("\n          Choose "+e._s("speaker_id"===e.speakerSelectedType.typeId?"an":"a")+" \n          "),t("span",{staticClass:"add-dialogue-label-select",attrs:{tabindex:"0"},on:{focusout:function(t){e.speakerSelect=!1}}},[t("span",{staticClass:"speaker-change",on:{click:function(t){e.speakerSelect=!e.speakerSelect}}},[e._v("\n              "+e._s(e.speakerSelectedType.typeName)+"\n            ")]),t("transition",{attrs:{name:"fadeAppear"}},[e.speakerSelect?t("div",{staticClass:"add-dialogue-label-select-items"},e._l(e.speakerTypes,(function(n){return t("div",{key:n,staticClass:"add-dialogue-label-select-items__item",on:{click:function(t){e.speakerSelectedType=n,e.speakerSelect=!1}}},[e._v("\n                "+e._s(n.typeName)+"\n              ")])})),0):e._e()]),e._v("\n            :\n        ")],1)]),t("label",{staticClass:"modal-field"},[e.nameError?t("span",{key:e.index,staticClass:"error"},[e._v(e._s(e.nameError))]):e._e(),t("input",{directives:[{name:"model",rawName:"v-model",value:e.inputName,expression:"inputName"}],staticClass:"modal-field__input",attrs:{name:"speaker-name",autocomplete:"off",placeholder:"Type ".concat(e.speakerSelectedType.typeName," name")},domProps:{value:e.inputName},on:{input:function(t){t.target.composing||(e.inputName=t.target.value)}}})]),"speaker_id"===e.speakerSelectedType.typeId?t("div",{staticClass:"found-names"},e._l(e.getNpcs,(function(n){return t("div",{key:n.id,staticClass:"found-names-name",class:{"found-names-name_active":!n.TMP_dep},on:{click:function(t){e.speakerId=n.id,e.speakerName=n.name}}},[t("div",{staticClass:"found-names-name__title"},[e._v(e._s(n.name))]),t("div",{staticClass:"found-names-name__id"},[e._v(e._s(n.id))])])})),0):t("div",{staticClass:"found-names"},e._l(e.getSpeakersByType,(function(n){return t("div",{key:n.toString(),staticClass:"found-names-name",on:{click:function(t){e.speakerName=n,e.speakerId=""}}},[e._v("\n            "+e._s(n)+"\n          ")])})),0)])])])])},mn=[],vn={data:function(){return{nameError:"",idError:"",inputName:"",inputTopic:"",speakerName:"",speakerId:"",dialogueType:"Topic",speakerSelectedType:{typeName:"NPC/Creature",typeId:"speaker_id"},dialogueSelectedType:{typeName:"Topic",typeId:"Topic"},speakerTypes:[{typeName:"NPC/Creature",typeId:"speaker_id"},{typeName:"Cell",typeId:"speaker_cell"},{typeName:"Faction",typeId:"speaker_faction"},{typeName:"Class",typeId:"speaker_class"},{typeName:"Race",typeId:"speaker_rank"},{typeName:"Global",typeId:""}],dialogueTypes:[{typeName:"Topic",typeId:"Topic"},{typeName:"Greeting",typeId:"Greeting"},{typeName:"Persuasion",typeId:"Persuasion"}],greetings:["Greeting 0","Greeting 1","Greeting 2","Greeting 3","Greeting 4","Greeting 5","Greeting 6","Greeting 7","Greeting 8","Greeting 9"],persuasions:["Bribe Fail","Bribe Success","Admire Fail","Admire Success","Intimidate Fail","Intimidate Success","Taunt Fail","Taunt Success","Info Refusal","Service Refusal"],speakerSelect:!1}},watch:{inputName:function(){this.debounce((function(){this.getNpcs}),1e3)},inputTopic:function(){this.debounce((function(){this.getTopics}),1e3)}},methods:{debounce:function(e,t){var n=null;return function(){clearTimeout(n);var r=arguments,i=this;n=setTimeout((function(){e.apply(i,r)}),t)}},createTopic:function(){if(this.inputTopic){console.log("SPEAKER_TYPE: ",this.speakerSelectedType.typeId);var e=this.$store.getters["getBestOrderLocationForNpc"]([this.speakerId,this.inputTopic,this.dialogueSelectedType.typeId,this.speakerSelectedType.typeId]);console.log(e[2]),this.$store.commit("addDialogue",[this.speakerSelectedType.typeId,this.speakerId||this.speakerName,this.inputTopic,this.dialogueSelectedType.typeId,e[0],"next","New entry"]),this.$store.commit("setPrimaryModal",""),this.$store.commit("setDialogueModal",this.speakerId)}}},computed:{getNpcs:function(){return this.inputName?this.$store.getters["searchNpcs"](this.inputName):[]},getTopics:function(){return this.inputTopic?this.$store.getters["searchTopics"](this.inputTopic):[]},getSpeakersByType:function(){var e=this;switch(this.speakerSelectedType.typeId){case"speaker_id":return[];case"speaker_cell":return this.$store.getters["getCellList"].filter((function(t){return t&&t.toUpperCase().includes(e.inputName.toUpperCase())}));case"speaker_rank":return this.$store.getters["getRaceList"].filter((function(t){return t&&t.toUpperCase().includes(e.inputName.toUpperCase())}));case"speaker_class":return this.$store.getters["getClassList"].filter((function(t){return t&&t.toUpperCase().includes(e.inputName.toUpperCase())}));case"speaker_faction":return this.$store.getters["getFactionList"].filter((function(t){return t&&t.toUpperCase().includes(e.inputName.toUpperCase())}));default:return[]}}}},hn=vn,yn=(n("7a16"),Object(u["a"])(hn,gn,mn,!1,null,null,null)),kn=yn.exports,bn=function(){var e=this,t=e._self._c;return t("div",{staticClass:"frame-upload"},[t("h2",{staticClass:"modal__title"},[e._v("Dialogue requirement")]),t("div",{staticClass:"filter-constructor"},[t("div",{staticClass:"filter-constructor-start",class:{"filter-constructor-start_rounded":""!==e.currentValue}},[t("span",{staticClass:"filter__if"},[e._v("if ")]),e.currentFilter.name?t("span",{staticClass:"filter__function filter-editable",on:{click:function(t){e.editable="name"}}},[e._v(e._s("Function"===e.currentFilter.name?e.currentFilter.filter_function:e.currentFilter.name)+"\n        ")]):e._e(),e.currentValueSecondary&&e.currentFilter.fields.length>1?t("span",{staticClass:"filter__value filter-editable",on:{click:function(t){e.editable="value-secondary"}}},[e._v("\n          "+e._s(e.currentValueSecondary)+"\n        ")]):e._e(),e.currentOperand?t("span",{staticClass:"filter__operand filter-editable",on:{click:function(t){e.editable="operand"}}},[e._v("\n          "+e._s(e.parseComparison(e.currentOperand))+"\n        ")]):e._e(),""!==e.currentValue?t("span",{staticClass:"filter__value filter-editable",on:{click:function(t){e.editable="value"}}},[e._v("\n          "+e._s(e.currentValue)+"\n        ")]):e._e()]),e.currentFilter.name?e._e():t("div",{staticClass:"filter-constructor-middle filter-constructor-middle_long"},[t("span",{staticClass:"filter__function"},[e._v(" ... ")])]),e.currentFilter.fields&&e.currentFilter.fields.length>1&&!e.currentValueSecondary?t("div",{staticClass:"filter-constructor-middle filter-constructor-middle_long"},[t("span",{staticClass:"filter__subvalue"},[e._v(" ... ")])]):e._e(),e.currentOperand?e._e():t("div",{staticClass:"filter-constructor-middle"},[t("span",{staticClass:"filter__operand"},[e._v(" ? ")])]),""===e.currentValue?t("div",{staticClass:"filter-constructor-end"},[t("span",{staticClass:"filter__value"},[e._v(" ... ")])]):e._e()]),e.currentFilter.name&&e.currentOperand&&e.currentValue?t("div",{staticClass:"save-changes"},[t("div",{staticClass:"save-changes__tip"},[e._v("\n        Tip: to edit the filter click on the parts of the filter text above.\n      ")]),t("div",{staticClass:"save-changes__save"},[t("button",{staticClass:"modal-button",attrs:{type:"submit"},on:{click:function(t){return e.commitFilter()}}},[e._v("\n          Save\n        ")]),t("button",{staticClass:"modal-button",attrs:{type:"submit"},on:{click:function(t){return e.cancelFilter()}}},[e._v("\n          Cancel\n        ")])])]):e._e(),t("div",{staticClass:"filter-editor"},[e.currentFilter.id&&"name"!==e.editable?e.currentFilter.fields.length>1&&!e.currentValueSecondary||"value-secondary"===e.editable?t("div",{staticClass:"value-select"},[t("div",{staticClass:"input-area"},[t("label",{staticClass:"modal-field"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.inputValueSecondary,expression:"inputValueSecondary"}],staticClass:"modal-field__input",attrs:{name:"dialogue-topic",placeholder:"Type the value",autocomplete:"off",required:""},domProps:{value:e.inputValueSecondary},on:{input:function(t){t.target.composing||(e.inputValueSecondary=t.target.value)}}})]),t("button",{staticClass:"modal-button",attrs:{type:"submit",disabled:!e.inputValueSecondary.trim()},on:{click:function(t){e.currentValueSecondary=e.inputValueSecondary,e.editable=""}}},[e._v("\n            Save\n          ")])])]):e.currentOperand&&"operand"!==e.editable?""===e.currentValue||"value"===e.editable?t("div",{staticClass:"value-select"},[t("div",{staticClass:"input-area"},[t("label",{staticClass:"modal-field"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.inputValue,expression:"inputValue"}],staticClass:"modal-field__input",attrs:{name:"dialogue-topic",placeholder:"Type the value",autocomplete:"off",required:""},domProps:{value:e.inputValue},on:{input:function(t){t.target.composing||(e.inputValue=t.target.value)}}})]),t("button",{staticClass:"modal-button",attrs:{type:"submit",disabled:!e.inputValue.trim()},on:{click:function(t){e.currentValue=e.inputValue,e.editable=""}}},[e._v("\n            Save\n          ")])]),"npc"===e.currentFilter.fields.slice(-1)[0]?t("div",{staticClass:"found-names"},e._l(e.getNpcs,(function(n){return t("div",{key:n.id,staticClass:"found-names-name",class:{"found-names-name_active":!n.TMP_dep},on:{click:function(t){e.inputValue=n.id}}},[t("div",{staticClass:"found-names-name__title"},[e._v(e._s(n.name))]),t("div",{staticClass:"found-names-name__id"},[e._v(e._s(n.id))])])})),0):e._e()]):e._e():t("div",{staticClass:"operand-select"},[e._v("\n        Select an operand:\n        "),e._l(e.currentFilter.operands,(function(n){return t("div",{key:n,staticClass:"operand",on:{click:function(t){e.currentOperand=n,e.editable=""}}},[e._v("\n          "+e._s(e.parseComparison(n))+"\n        ")])}))],2):t("div",{staticClass:"filter-select"},e._l(e.filterGroupsNew,(function(n){return t("div",{key:n.name,staticClass:"filter-group"},[t("div",{staticClass:"filter-group__title"},[e._v(e._s(n.name))]),t("div",{staticClass:"filter-group-filters"},e._l(e.getFunctions(n),(function(n){return t("div",{key:n,staticClass:"dialogue-filters__filter",on:{click:function(t){e.currentFilterFunction=n,e.editable=""}}},[t("span",{staticClass:"filter__if"},[e._v("if ")]),t("span",{staticClass:"filter__function"},[e._v(e._s(n)+"\n              ")])])})),0)])})),0)])])},Cn=[],Pn={data:function(){return{currentFilter:{},currentOperand:"",currentValue:"",currentValueSecondary:"",inputValue:"",inputValueSecondary:"",editable:"",filterGroupsNew:[{name:"Major filters",types:[{name:"Journal",functions:["JournalType"]},{name:"Function",functions:["Choice","Pcgold"]},{name:"Dead",functions:["DeadType"]},{name:"Item",functions:["ItemType"]}]},{name:"Variables",types:[{name:"Global",functions:["CompareGlobal"]},{name:"Local",functions:["CompareLocal"]}]},{name:"Not",types:[{name:"NotId",functions:["NotIdType"]},{name:"NotCell",functions:["NotCell"]},{name:"NotFaction",functions:["NotFaction"]},{name:"NotClass",functions:["NotClass"]},{name:"NotRace",functions:["NotRace"]},{name:"NotLocal",functions:["Global"]}]},{name:"Player filters",types:[{name:"Function",functions:["PcReputation","PcLevel","PcHealthPercent","PcMagicka","PcFatigue","PcStrength","PcBlock","PcArmorer","PcMediumArmor","PcHeavyArmor","PcBluntWeapon","PcLongBlade","PcAxe","PcSpear","PcAthletics","PcEnchant","PcDestruction","PcAlteration","PcIllusion","PcConjuration","PcMysticism","PcRestoration","PcAlchemy","PcUnarmored","PcSecurity","PcSneak","PcAcrobatics","PcLightArmor","PcShortBlade","PcMarksman","PcMercantile","PcSpeechcraft","PcHandToHand","PcSex","PcExpelled","PcCommonDisease","PcBlightDisease","PcClothingModifier","PcCrimeLevel","PcIntelligence","PcWillpower","PcAgility","PcSpeed","PcEndurance","PcPersonality","PcLuck","PcCorprus","PcVampire","PcHealth"]}]},{name:"Other filters",types:[{name:"Function",functions:["ReactionLow","ReactionHigh","RankRequirement","Reputation","HealthPercent","SameSex","SameRace","SameFaction","FactionRankDifference","Detected","Alarmed","Weather","Level","Attacked","TalkedToPc","CreatureTarget","FriendHit","Fight","Hello","Alarm","Flee","ShouldAttack","Werewolf","WerewolfKills"]}]}],filterGroups:[{name:"Speaker filters:",filters:[{id:"speaker_id",name:"Speaker ID",operands:["Equal"],fields:["npc"]},{id:"speaker_cell",name:"Speaker Cell",operands:["Equal"],fields:["cell"]},{id:"speaker_class",name:"Speaker Class",operands:["Equal"],fields:["class"]},{id:"speaker_faction",name:"Speaker Faction",operands:["Equal"],fields:["faction"]},{id:"speaker_race",name:"Speaker Race",operands:["Equal"],fields:["race"]},{id:"speaker_rank",name:"Speaker Rank",operands:["Equal"],fields:["rank"]},{id:"speaker_sex",name:"Speaker Sex",operands:["Equal"],fields:["sex"]}]},{name:"Player filters:",filters:[{id:"player_faction",name:"Player Faction",operands:["Equal"],fields:["faction"]},{id:"player_rank",name:"Player Rank",operands:["Equal"],fields:["rank"]}]},{name:"Disposition:",filters:[{id:"disposition",name:"Disposition",operands:["Greater"],fields:["disposition"]}]},{name:"Functions:",filters:[{id:"function_journal",name:"Journal",filter_function:"JournalType",operands:["Less","LesserEqual","NotEqual","Equal","GreaterEqual","Greater"],fields:["journal_id","journal_disposition"]},{id:"function_item",name:"Item",filter_function:"ItemType",operands:["Less","LesserEqual","NotEqual","Equal","GreaterEqual","Greater"],fields:["item_id","item_amount"]},{id:"function_dead",name:"Dead",operands:["Less","LesserEqual","NotEqual","Equal","GreaterEqual","Greater"],filter_function:"DeadType",fields:["npc"]},{id:"function_choice",name:"Function",filter_function:"Choice",operands:["Less","LesserEqual","NotEqual","Equal","GreaterEqual","Greater"],fields:["choice"]}]},{name:"Variables:",filters:[{id:"function_global",name:"Global",filter_function:"VariableCompare",operands:["Less","LesserEqual","NotEqual","Equal","GreaterEqual","Greater"],fields:["global_dropdown","global_value"]},{id:"function_local",name:"Local",filter_function:"VariableCompare",operands:["Less","LesserEqual","NotEqual","Equal","GreaterEqual","Greater"],fields:["local_input","local_value"]}]},{name:"Not:",filters:[{id:"function_not_id",name:"NotId",filter_function:"NotIdType",operands:["Less","LesserEqual","NotEqual","Equal","GreaterEqual","Greater"],fields:["npc","value"]},{id:"function_not_cell",name:"NotCell",filter_function:"NotCell",operands:["Less","LesserEqual","NotEqual","Equal","GreaterEqual","Greater"],fields:["cell","value"]},{id:"function_not_class",name:"NotClass",filter_function:"NotClass",operands:["Less","LesserEqual","NotEqual","Equal","GreaterEqual","Greater"],fields:["class","value"]},{id:"function_not_faction",name:"NotFaction",filter_function:"NotFaction",operands:["Less","LesserEqual","NotEqual","Equal","GreaterEqual","Greater"],fields:["faction","value"]},{id:"function_not_race",name:"NotRace",filter_function:"NotRace",operands:["Less","LesserEqual","NotEqual","Equal","GreaterEqual","Greater"],fields:["race","value"]},{id:"function_not_local",name:"NotLocal",filter_function:"VariableCompare",operands:["Less","LesserEqual","NotEqual","Equal","GreaterEqual","Greater"],fields:["local","value"]}]}]}},methods:{commitFilter:function(){if(this.currentFilter.id.includes("function")&&""===this.getSelectedFilterIndex){var e={filter_comparison:this.currentOperand,filter_function:this.currentFilter.filter_function,filter_type:this.currentFilter.name,id:this.currentValueSecondary,value:{Integer:parseInt(this.currentValue)}};this.currentValueSecondary||delete e.id,this.$store.commit("addFilter",[e,this.getSelectedInfoId])}this.$store.commit("setPrimaryModal","")},cancelFilter:function(){this.$store.commit("setPrimaryModal","")},parseComparison:function(e){switch(e){case"Equal":return"==";case"GreaterEqual":return">=";case"LesserEqual":return"<=";case"Less":return"<";case"Greater":return">";case"NotEqual":return"!=";default:return e}},getFunctions:function(e){return e.types.map((function(e){return e.functions})).flat()}},computed:{getNpcs:function(){return this.inputValue?this.$store.getters["searchNpcs"](this.inputValue):[]},getSelectedFilter:function(){return this.$store.getters["getSelectedFilter"]},getSelectedFilterIndex:function(){return this.$store.getters["getSelectedFilterIndex"]},getSelectedInfoId:function(){return this.$store.getters["getSelectedInfoId"]}},beforeMount:function(){var e=this.getSelectedFilter;e.filter_type?(this.currentOperand=e.filter_comparison,this.currentFilter=this.filterGroups.map((function(e){return e.filters})).flat(1).find((function(t){return t&&t.name===e.filter_type})),this.currentValueSecondary=e.id,this.inputValueSecondary=e.id,this.currentValue=Object.values(e.value)[0],this.inputValue=Object.values(e.value)[0]):(this.currentOperand="",this.currentFilter={},this.currentValueSecondary="",this.inputValueSecondary="",this.currentValue="",this.inputValue="")}},wn=Pn,Tn=(n("bc0e"),Object(u["a"])(wn,bn,Cn,!1,null,null,null)),xn=Tn.exports,On={data:function(){return{modalType:"",triggerFade:""}},methods:{hideModals:function(){this.$store.commit("setPrimaryModal","")}},computed:{getModal:function(){return this.$store.getters["getPrimaryModal"]}},watch:{getModal:function(){var e=Object(g["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){return setTimeout(e,1)}));case 2:if(this.triggerFade=t,""!==t){e.next=6;break}return e.next=6,new Promise((function(e){return setTimeout(e,300)}));case 6:this.modalType=this.getModal;case 7:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},components:{ModalContentUpload:cn,ModalContentNewQuest:_n,ModalContentNewDialogue:kn,ModalContentNewFilter:xn}},Sn=On,Dn=(n("f6aa"),Object(u["a"])(Sn,en,tn,!1,null,"7e141e02",null)),En=Dn.exports,Mn=function(){var e=this,t=e._self._c;return e.getActive?t("div",{staticClass:"classic-view-frame"},[t("button",{staticClass:"classic-view-frame__close",on:{click:e.closeClassicView}},[t("icon",{staticClass:"classic-view-frame__close-icon",attrs:{name:"times",scale:"1.5"}})],1),t("div",{staticClass:"classic-view-frame__wrapper"},[t("div",{staticClass:"classic-view-frame__header"}),t("div",{staticClass:"classic-view-frame__containter container",class:{container_half:e.currentId}},[t("div",{staticClass:"container-topics"},[t("div",{staticClass:"container-topics-header"},e._l(["Topic","Greeting","Persuasion","Journal"],(function(n){return t("div",{key:n,staticClass:"container-topics-header__item",class:{"container-topics-header__item_current":n===e.topicType},on:{click:function(t){e.topicType=n}}},[e._v("\n              "+e._s(n)+"\n            ")])})),0),e._l(e.getAllTopics,(function(n){return t("div",{key:n[0].id,staticClass:"container-topics__topic",class:{"container-topics__topic_dep":e.getTmpDep(n)&&!e.getNoTmpDep(n),"container-topics__topic_mod":e.getTmpDep(n)&&e.getNoTmpDep(n),"container-topics__topic_current":e.getCurrentTopic===n[0].id},on:{click:function(t){return e.setCurrentTopic(n[0].id)}}},[e._v("\n            "+e._s(n[0].id)+"\n          ")])}))],2),t("div",{staticClass:"container-entries"},[e.rows.length?t("table",{attrs:{border:"0",cellspacing:"0",cellpadding:"0"}},[t("tr",{staticClass:"container-entries__header"},[t("th"),t("th",[e._v("Text")]),t("th",[e._v("\n                "+e._s(e.getOrderedEntries[0]&&"Journal"===e.getOrderedEntries[0].TMP_type?"Index":"Disp")+"\n              ")]),e.getOrderedEntries[0]&&"Journal"!==e.getOrderedEntries[0].TMP_type?t("th",[e._v("\n                Speaker ID\n              ")]):e._e(),e.getOrderedEntries[0]&&"Journal"!==e.getOrderedEntries[0].TMP_type?t("th",[e._v("\n                Speaker Faction\n              ")]):e._e(),e.getOrderedEntries[0]&&"Journal"!==e.getOrderedEntries[0].TMP_type?t("th",[e._v("\n                Speaker Cell\n              ")]):e._e(),e._l(e.getOrderedEntries[0]&&"Journal"!==e.getOrderedEntries[0].TMP_type?6:0,(function(n){return t("th",{key:n},[e._v("\n                Filter "+e._s(n)+"\n              ")])}))],2),t("draggable",{tag:"transition-group",attrs:{tag:"tbody",list:e.rows,name:e.drag?null:"flip-list",handle:".container-entries__grip","scroll-sensitivity":500,animation:"200"},on:{start:function(t){e.drag=!0},end:function(t){e.drag=!1},change:e.handleReorder}},e._l(e.rows,(function(n){return t("tr",{key:n,staticClass:"container-entries__entry",class:{"container-entries__entry_active":e.currentId===n,"container-entries__entry_new":!e.getOrderedEntries.find((function(e){return e.info_id==n})).TMP_dep,"container-entries__entry_mod":!e.getOrderedEntries.find((function(e){return e.info_id==n})).TMP_dep&&e.getOrderedEntries.find((function(e){return e.info_id==n})).old_values&&e.getOrderedEntries.find((function(e){return e.info_id==n})).old_values.length,"container-entries__entry_del":void 0!==e.getOrderedEntries.find((function(e){return e.info_id==n})).deleted,"container-entries__entry_dirty":!e.getOrderedEntries.find((function(e){return e.info_id==n})).TMP_dep&&e.getOrderedEntries.find((function(e){return e.info_id==n})).old_values&&e.checkDirtied(e.getOrderedEntries.find((function(e){return e.info_id==n})).old_values.at(-1),e.getOrderedEntries.find((function(e){return e.info_id==n})))},on:{click:function(t){e.currentId===n?e.cancelEdit():e.editEntry(n)}}},[t("td",{staticClass:"container-entries__grip",on:{click:function(e){e.stopPropagation()}}},[t("icon",{staticClass:"classic-view-frame__close-icon",attrs:{name:"grip-horizontal",scale:"1"}})],1),t("td",{staticClass:"container-entries__text"},[e._v("\n                  "+e._s(e.getOrderedEntries.find((function(e){return e.info_id==n})).text&&e.getOrderedEntries.find((function(e){return e.info_id==n})).text.length>150?e.getOrderedEntries.find((function(e){return e.info_id==n})).text.slice(0,150)+"...":e.getOrderedEntries.find((function(e){return e.info_id==n})).text)+"\n                ")]),t("td",[e._v("\n                  "+e._s(e.getOrderedEntries.find((function(e){return e.info_id==n})).data&&e.getOrderedEntries.find((function(e){return e.info_id==n})).data.disposition||"")+"\n                ")]),e.getOrderedEntries[0]&&"Journal"!==e.getOrderedEntries[0].TMP_type?t("td",{staticClass:"container-entries__speaker"},[e._v("\n                  "+e._s(e.getOrderedEntries.find((function(e){return e.info_id==n})).speaker_id)+"\n                ")]):e._e(),e.getOrderedEntries[0]&&"Journal"!==e.getOrderedEntries[0].TMP_type?t("td",{staticClass:"container-entries__speaker"},[e._v("\n                  "+e._s(e.getOrderedEntries.find((function(e){return e.info_id==n})).speaker_faction)+"\n                ")]):e._e(),e.getOrderedEntries[0]&&"Journal"!==e.getOrderedEntries[0].TMP_type?t("td",{staticClass:"container-entries__speaker"},[e._v("\n                  "+e._s(e.getOrderedEntries.find((function(e){return e.info_id==n})).speaker_cell)+"\n                ")]):e._e(),e._l(e.getOrderedEntries[0]&&"Journal"!==e.getOrderedEntries[0].TMP_type?6:0,(function(r){return t("td",{key:r},[e.getOrderedEntries.find((function(e){return e.info_id==n})).filters.find((function(e){return e.slot==="Slot"+(r-1).toString()}))?t("div",{staticClass:"classic-filter"},[t("span",{staticClass:"classic-filter__type"},[e._v(e._s(e.getOrderedEntries.find((function(e){return e.info_id==n})).filters.find((function(e){return e.slot==="Slot"+(r-1).toString()})).filter_function||e.getOrderedEntries.find((function(e){return e.info_id==n})).filters.find((function(e){return e.slot==="Slot"+(r-1).toString()})).filter_type))]),t("span",{staticClass:"classic-filter__id"},[e._v(e._s(e.getOrderedEntries.find((function(e){return e.info_id==n})).filters.find((function(e){return e.slot==="Slot"+(r-1).toString()})).id))]),t("span",{staticClass:"classic-filter__compare"},[e._v(e._s(e.getOrderedEntries.find((function(e){return e.info_id==n})).filters.find((function(e){return e.slot==="Slot"+(r-1).toString()})).filter_comparison))]),t("span",{staticClass:"classic-filter__value"},[e._v(e._s(Object.values(e.getOrderedEntries.find((function(e){return e.info_id==n})).filters.find((function(e){return e.slot==="Slot"+(r-1).toString()})).value)[0]))])]):e._e()])}))],2)})),0)],1):e._e()])]),e.currentId?t("div",{staticClass:"classic-view-frame__edit"},[t("button",{staticClass:"edit__close",attrs:{disabled:!e.checkChanges},on:{click:function(t){return e.saveEdit()}}},[t("icon",{staticClass:"edit__close-icon",class:{"edit__close-icon_disabled":!e.checkChanges},attrs:{name:"save",scale:"1.5"}})],1),t("button",{staticClass:"edit__cancel",attrs:{disabled:!e.checkChanges},on:{click:function(t){return e.editEntry(e.currentId)}}},[t("icon",{staticClass:"edit__close-icon",class:{"edit__close-icon_disabled":!e.checkChanges},attrs:{name:"ban",scale:"1.5"}})],1),t("div",{staticClass:"edit__text"},[t("textarea",{directives:[{name:"model",rawName:"v-model",value:e.currentText,expression:"currentText"}],staticClass:"modal-field__input",domProps:{value:e.currentText},on:{input:function(t){t.target.composing||(e.currentText=t.target.value)}}})]),t("div",{staticClass:"edit__filters"},[t("label",{staticClass:"modal-field modal-field_dark modal-field_speaker-edit"},[t("span",[e._v(e._s(e.getOrderedEntries.find((function(t){return t.info_id===e.currentId}))&&"Journal"===e.getOrderedEntries.find((function(t){return t.info_id===e.currentId})).TMP_type?"Index":"Disposition")+":")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.currentDisp,expression:"currentDisp"}],staticClass:"modal-field__input",attrs:{name:"speaker-name",autocomplete:"off",placeholder:"Player Rank"},domProps:{value:e.currentDisp},on:{input:function(t){t.target.composing||(e.currentDisp=t.target.value)}}})]),e.getOrderedEntries.find((function(t){return t.info_id===e.currentId}))&&"Journal"!==e.getOrderedEntries.find((function(t){return t.info_id===e.currentId})).TMP_type?t("div",{staticClass:"edit__filters-group-header"},[t("span",[e._v("Speaker conditions:")]),t("span",{staticClass:"link",on:{click:function(t){e.showEmptySpeakers=!e.showEmptySpeakers}}},[e._v(e._s(e.showEmptySpeakers?"Hide empty":"Show all"))])]):e._e(),e.getOrderedEntries.find((function(t){return t.info_id===e.currentId}))&&"Journal"!==e.getOrderedEntries.find((function(t){return t.info_id===e.currentId})).TMP_type?t("div",{staticClass:"edit__filters-group"},[e.showEmptySpeakers||e.currentSpeakerData.speaker_id?t("label",{staticClass:"modal-field modal-field_dark modal-field_speaker-edit"},[t("span",[e._v("Speaker ID:")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.currentSpeakerData.speaker_id,expression:"currentSpeakerData.speaker_id"}],staticClass:"modal-field__input",attrs:{name:"speaker_id",autocomplete:"off",placeholder:"Speaker ID"},domProps:{value:e.currentSpeakerData.speaker_id},on:{input:function(t){t.target.composing||e.$set(e.currentSpeakerData,"speaker_id",t.target.value)}}})]):e._e(),e.showEmptySpeakers||e.currentSpeakerData.speaker_cell?t("label",{staticClass:"modal-field modal-field_dark modal-field_speaker-edit"},[t("span",[e._v("Speaker Cell:")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.currentSpeakerData.speaker_cell,expression:"currentSpeakerData.speaker_cell"}],staticClass:"modal-field__input",attrs:{name:"speaker_cell",autocomplete:"off",placeholder:"Speaker Cell"},domProps:{value:e.currentSpeakerData.speaker_cell},on:{input:function(t){t.target.composing||e.$set(e.currentSpeakerData,"speaker_cell",t.target.value)}}})]):e._e(),e.showEmptySpeakers||e.currentSpeakerData.speaker_faction?t("label",{staticClass:"modal-field modal-field_dark modal-field_speaker-edit"},[t("span",[e._v("Speaker Faction:")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.currentSpeakerData.speaker_faction,expression:"currentSpeakerData.speaker_faction"}],staticClass:"modal-field__input",attrs:{name:"speaker_faction",autocomplete:"off",placeholder:"Speaker Faction"},domProps:{value:e.currentSpeakerData.speaker_faction},on:{input:function(t){t.target.composing||e.$set(e.currentSpeakerData,"speaker_faction",t.target.value)}}})]):e._e(),e.showEmptySpeakers||e.currentSpeakerData.speaker_rank?t("label",{staticClass:"modal-field modal-field_dark modal-field_speaker-edit"},[t("span",[e._v("Speaker Rank:")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.currentSpeakerData.speaker_rank,expression:"currentSpeakerData.speaker_rank"}],staticClass:"modal-field__input",attrs:{name:"speaker_rank",autocomplete:"off",placeholder:"Speaker Rank"},domProps:{value:e.currentSpeakerData.speaker_rank},on:{input:function(t){t.target.composing||e.$set(e.currentSpeakerData,"speaker_rank",t.target.value)}}})]):e._e(),e.showEmptySpeakers||e.currentSpeakerData.speaker_class?t("label",{staticClass:"modal-field modal-field_dark modal-field_speaker-edit"},[t("span",[e._v("Speaker Class:")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.currentSpeakerData.speaker_class,expression:"currentSpeakerData.speaker_class"}],staticClass:"modal-field__input",attrs:{name:"speaker_class",autocomplete:"off",placeholder:"Speaker Class"},domProps:{value:e.currentSpeakerData.speaker_class},on:{input:function(t){t.target.composing||e.$set(e.currentSpeakerData,"speaker_class",t.target.value)}}})]):e._e(),e.showEmptySpeakers||e.currentSpeakerData.speaker_race?t("label",{staticClass:"modal-field modal-field_dark modal-field_speaker-edit"},[t("span",[e._v("Speaker Race:")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.currentSpeakerData.speaker_race,expression:"currentSpeakerData.speaker_race"}],staticClass:"modal-field__input",attrs:{name:"speaker_race",autocomplete:"off",placeholder:"Speaker Race"},domProps:{value:e.currentSpeakerData.speaker_race},on:{input:function(t){t.target.composing||e.$set(e.currentSpeakerData,"speaker_race",t.target.value)}}})]):e._e(),e.showEmptySpeakers||e.currentSpeakerData.speaker_sex?t("label",{staticClass:"modal-field modal-field_dark modal-field_speaker-edit"},[t("span",[e._v("Speaker Sex:")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.currentSpeakerData.speaker_sex,expression:"currentSpeakerData.speaker_sex"}],staticClass:"modal-field__input",attrs:{name:"speaker_sex",autocomplete:"off",placeholder:"Speaker Sex"},domProps:{value:e.currentSpeakerData.speaker_sex},on:{input:function(t){t.target.composing||e.$set(e.currentSpeakerData,"speaker_sex",t.target.value)}}})]):e._e()]):e._e(),e.getOrderedEntries.find((function(t){return t.info_id===e.currentId}))&&"Journal"!==e.getOrderedEntries.find((function(t){return t.info_id===e.currentId})).TMP_type?t("div",{staticClass:"edit__filters-group-header"},[t("span",[e._v("Player conditions:")]),t("span",{staticClass:"link",on:{click:function(t){e.showEmptyPlayerFilters=!e.showEmptyPlayerFilters}}},[e._v(e._s(e.showEmptyPlayerFilters?"Hide empty":"Show all"))])]):e._e(),e.getOrderedEntries.find((function(t){return t.info_id===e.currentId}))&&"Journal"!==e.getOrderedEntries.find((function(t){return t.info_id===e.currentId})).TMP_type?t("div",{staticClass:"edit__filters-group"},[e.showEmptyPlayerFilters||e.currentSpeakerData.player_faction?t("label",{staticClass:"modal-field modal-field_dark modal-field_speaker-edit"},[t("span",[e._v("Player Faction:")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.currentSpeakerData.player_faction,expression:"currentSpeakerData.player_faction"}],staticClass:"modal-field__input",attrs:{name:"speaker-name",autocomplete:"off",placeholder:"Player Faction"},domProps:{value:e.currentSpeakerData.player_faction},on:{input:function(t){t.target.composing||e.$set(e.currentSpeakerData,"player_faction",t.target.value)}}})]):e._e(),e.showEmptyPlayerFilters||e.currentSpeakerData.player_rank?t("label",{staticClass:"modal-field modal-field_dark modal-field_speaker-edit"},[t("span",[e._v("Player Rank:")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.currentSpeakerData.player_rank,expression:"currentSpeakerData.player_rank"}],staticClass:"modal-field__input",attrs:{name:"speaker-name",autocomplete:"off",placeholder:"Player Rank"},domProps:{value:e.currentSpeakerData.player_rank},on:{input:function(t){t.target.composing||e.$set(e.currentSpeakerData,"player_rank",t.target.value)}}})]):e._e()]):e._e(),e.getOrderedEntries.find((function(t){return t.info_id===e.currentId}))&&"Journal"!==e.getOrderedEntries.find((function(t){return t.info_id===e.currentId})).TMP_type?t("div",{staticClass:"edit__filters-group-header"},[t("span",[e._v("Filters:")]),t("span",{staticClass:"link",on:{click:function(t){e.showEmptyDialogueFilters=!e.showEmptyDialogueFilters}}},[e._v(e._s(e.showEmptyDialogueFilters?"Hide empty":"Show all"))])]):e._e(),e.getOrderedEntries.find((function(t){return t.info_id===e.currentId}))&&"Journal"!==e.getOrderedEntries.find((function(t){return t.info_id===e.currentId})).TMP_type?t("div",{staticClass:"edit__filters-group"},[t("DialogueEntryFilters",{attrs:{editMode:"",onlyFilters:"",answer:e.getOrderedEntries.find((function(t){return t.info_id===e.currentId})),speaker:""}})],1):e._e()]),t("div",{staticClass:"edit__result"},[t("CodeEditor",{staticClass:"edit__result-code",attrs:{hide_header:!0,height:"100%",width:"100%","font-size":"12px",border_radius:"0"},model:{value:e.currentResult,callback:function(t){e.currentResult=t},expression:"currentResult"}})],1)]):e._e()])]):e._e()},Fn=[],In=n("4a7a"),Nn=n.n(In),jn={data:function(){return{rows:[],updateTrigger:0,drag:!1,currentId:"",editCode:"",topicType:"Topic",currentFilters:[],currentDisp:"",showEmptySpeakers:!1,showEmptyPlayerFilters:!1,showEmptyDialogueFilters:!1,showDisp:!1,currentText:"",currentResult:"",currentSpeakerData:{speaker_id:"",speaker_cell:"",speaker_faction:"",speaker_class:"",speaker_race:"",speaker_sex:"",speaker_rank:"",player_faction:"",player_rank:""},filterGroups:[{name:"Major filters",types:[{name:"Journal",functions:["JournalType"]},{name:"Function",functions:["Choice","Pcgold"]},{name:"Dead",functions:["DeadType"]},{name:"Item",functions:["ItemType"]}]},{name:"Variables",types:[{name:"Global",functions:["CompareGlobal"]},{name:"Local",functions:["CompareLocal"]}]},{name:"Not",types:[{name:"NotId",functions:["NotIdType"]},{name:"NotCell",functions:["NotCell"]},{name:"NotFaction",functions:["NotFaction"]},{name:"NotClass",functions:["NotClass"]},{name:"NotRace",functions:["NotRace"]},{name:"NotLocal",functions:["Global"]}]},{name:"Player filters",types:[{name:"Function",functions:["PcReputation","PcLevel","PcHealthPercent","PcMagicka","PcFatigue","PcStrength","PcBlock","PcArmorer","PcMediumArmor","PcHeavyArmor","PcBluntWeapon","PcLongBlade","PcAxe","PcSpear","PcAthletics","PcEnchant","PcDestruction","PcAlteration","PcIllusion","PcConjuration","PcMysticism","PcRestoration","PcAlchemy","PcUnarmored","PcSecurity","PcSneak","PcAcrobatics","PcLightArmor","PcShortBlade","PcMarksman","PcMercantile","PcSpeechcraft","PcHandToHand","PcSex","PcExpelled","PcCommonDisease","PcBlightDisease","PcClothingModifier","PcCrimeLevel","PcIntelligence","PcWillpower","PcAgility","PcSpeed","PcEndurance","PcPersonality","PcLuck","PcCorprus","PcVampire","PcHealth"]}]},{name:"Other filters",types:[{name:"Function",functions:["ReactionLow","ReactionHigh","RankRequirement","Reputation","HealthPercent","SameSex","SameRace","SameFaction","FactionRankDifference","Detected","Alarmed","Weather","Level","Attacked","TalkedToPc","CreatureTarget","FriendHit","Fight","Hello","Alarm","Flee","ShouldAttack","Werewolf","WerewolfKills"]}]}],filterTypes:["None","Function","Global","Local","NotId","NotCell","NotFaction","NotClass","NotRace","NotLocal"],filterFunctions:["NotClass","NotFaction","NotCell","NotRace","NotIdType","Global","CompareGlobal","CompareLocal"],filterComparisons:["Less","LesserEqual","NotEqual","Equal","GreaterEqual","Greater"]}},components:{Icon:k["a"],draggable:Ge.a,CodeEditor:Nt["a"],vSelect:Nn.a,DialogueEntryFilters:Jt},mounted:function(){this.rows=this.getOrderedEntries.map((function(e){return e.info_id}))},watch:{getOrderedEntries:function(e){this.rows=e.map((function(e){return e.info_id}))}},computed:{getActive:function(){return this.$store.getters["getClassicView"]},getCurrentTopic:function(){return this.$store.getters["getClassicViewTopic"]},getAllTopics:function(){return this.$store.getters["getAllTopics"](this.topicType)},getOrderedEntries:function(){return this.updateTrigger,this.$store.getters["getOrderedEntriesByTopic"]([this.getCurrentTopic,this.topicType])},getTopicFilterAmount:function(){return 6},checkChanges:function(){var e=this,t=this.getOrderedEntries.find((function(t){return t.info_id===e.currentId}));return!!t&&(t.text!==this.currentText&&[t.text,this.currentText])}},methods:{closeClassicView:function(){this.$store.commit("setClassicView",!1)},setCurrentTopic:function(e){this.$store.commit("setClassicViewTopic",e)},editEntry:function(e){this.currentId=e,this.updateTrigger++;var t=this.getOrderedEntries.find((function(t){return t.info_id===e}));this.currentSpeakerData.speaker_id=t.speaker_id||"",this.currentSpeakerData.speaker_cell=t.speaker_cell||"",this.currentSpeakerData.speaker_faction=t.speaker_faction||"",this.currentSpeakerData.speaker_class=t.speaker_class||"",this.currentSpeakerData.speaker_race=t.speaker_rank||"",this.currentSpeakerData.speaker_sex="Any"!==t.data.speaker_sex?this.answer.data.speaker_sex:"",this.currentSpeakerData.speaker_rank=-1!==t.data.speaker_rank?this.answer.data.speaker_rank:"",this.currentFilters=t.filters,this.currentDisp=t.data&&t.data.disposition,this.currentResult=t.result,this.currentText=t.text},cancelEdit:function(){this.currentId=""},saveEdit:function(){var e=this;this.updateTrigger++;var t=this.getOrderedEntries.find((function(t){return t.info_id===e.currentId}));t.text=this.currentText,this.currentResult&&(t.result=this.currentResult.replace(/\r?\n/g,"\r\n")),this.$store.dispatch("replaceDialogueEntry",[this.currentId,t]),this.rows=this.getOrderedEntries.map((function(e){return e.info_id})),this.editEntry(this.currentId)},handleReorder:function(e){var t=e.moved.element,n=this.getOrderedEntries.find((function(t){return t.info_id===e.moved.element})).prev_id,r=this.getOrderedEntries.find((function(t){return t.info_id===e.moved.element})).next_id,i=this.rows[e.moved.newIndex-1]||"",a=this.rows[e.moved.newIndex+1]||"";this.$store.commit("moveDialogueEntry",[t,n,r,i,a]),this.updateTrigger++,this.rows=this.getOrderedEntries.map((function(e){return e.info_id}))},getTmpDep:function(e){return e.filter((function(e){return e.TMP_dep})).length},getNoTmpDep:function(e){return e.filter((function(e){return!e.TMP_dep})).length},checkDirtied:function(e,t){if(!e||!t)return!1;var n=Object.fromEntries(Object.entries(e).filter((function(e){var t=Object(vt["a"])(e,1),n=t[0];return!n.includes("_id")&&!n.includes("TMP_")&&!n.includes("old_values")}))),r=Object.fromEntries(Object.entries(t).filter((function(e){var t=Object(vt["a"])(e,1),n=t[0];return!n.includes("_id")&&!n.includes("TMP_")&&!n.includes("old_values")})));return JSON.stringify(n)===JSON.stringify(r)}}},An=jn,Rn=(n("e28d"),Object(u["a"])(An,Mn,Fn,!1,null,null,null)),qn=Rn.exports,Ln={name:"App",components:{ToolbarReadFile:p,JournalFrame:S,ToolBarOpen:N,ModalMain:G,BookFrame:ee,CWorkspace:Dt,ModalContentDialogue:Zt,ModalFrame:En,ModalClassicView:qn},computed:{OpenModal:function(){return this.$store.getters["getOpenFile"]},getQuestCreateModal:function(){return this.$store.getters["getQuestCreateModal"]},getDialogueCreateModal:function(){return this.$store.getters["getDialogueCreateModal"]},getOpenModalDialogue:function(){return this.$store.getters["getDialogueModal"]}},mounted:function(){this.$store.dispatch("initIndexedDB")}},$n=Ln,Hn=(n("60da"),Object(u["a"])($n,i,a,!1,null,null,null)),Gn=Hn.exports,Bn=n("2f62"),Jn=(n("20d6"),n("4f96")),Vn=n("8468"),Un=n("53ca");function Qn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Wn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Qn(Object(n),!0).forEach((function(t){Object(le["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Qn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function zn(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=Kn(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,o=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){o=!0,a=e},f:function(){try{s||null==n.return||n.return()}finally{if(o)throw a}}}}function Kn(e,t){if(e){if("string"===typeof e)return Xn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Xn(e,t):void 0}}function Xn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Yn={activePlugin:[],parsedQuests:[],activeHeader:{},activePluginTitle:"",journalHighlight:{},dependencies:[],cellList:[],raceList:[],classList:[],factionList:[],npcList:[],topicsList:[],activePluginDB:null,dependenciesDB:{},questEntries:[],allDialogueNPCs:[],allQuestIDs:[]},Zn={getFactions:function(e){var t=e.dependencies.flatMap((function(e){return e.data})).filter((function(e){return"Faction"===e.type})),n=e.activePlugin.filter((function(e){return"Faction"===e.type}));return[].concat(Object(h["a"])(t),Object(h["a"])(n))},getAllQuestIDs:function(e){return e.allQuestIDs},getParsedQuests:function(e){return e.questEntries},getActivePlugin:function(e){if(e.activePlugin.length){var t=e.activePlugin.find((function(e){return e&&"Header"===e.type}));return t&&(t.num_objects=e.activePlugin.length-1),e.activePlugin}},getActiveHeader:function(e){return e.activeHeader},getCellList:function(e){return e.cellList},getRaceList:function(e){return e.raceList},getClassList:function(e){return e.classList},getFactionList:function(e){return e.factionList},getJournalHighlight:function(e){return e.journalHighlight},getActivePluginTitle:function(e){return e.activePluginTitle},getAllNpcs:function(e){return e.allDialogueNPCs},getAllCreatures:function(e){var t,n=[],r=zn(e.dependencies);try{for(r.s();!(t=r.n()).done;){var i=t.value;n.push.apply(n,Object(h["a"])(i.data.filter((function(e){return"Creature"===e.type}))))}}catch(d){r.e(d)}finally{r.f()}var a,s=[].concat(Object(h["a"])(e.activePlugin.filter((function(e){return"Creature"===e.type}))),n),o={},c=zn(s);try{for(c.s();!(a=c.n()).done;){var l=a.value;o[l.id]=l}}catch(d){c.e(d)}finally{c.f()}var u=Object.values(o);return u},getAllTopics:function(e){return function(t){var n,r=[],i=zn(e.dependencies);try{for(i.s();!(n=i.n()).done;){var a=n.value;r.push.apply(r,Object(h["a"])(a.data.filter((function(e){return e.TMP_type===t&&"Dialogue"===e.type}))))}}catch(p){i.e(p)}finally{i.f()}var s,o=[].concat(Object(h["a"])(e.topicsList.filter((function(e){return e.TMP_type===t}))),r),c={},l=zn(o);try{for(l.s();!(s=l.n()).done;){var u=s.value;c[u.id]=c[u.id]?[].concat(Object(h["a"])(c[u.id]),[u]):[u]}}catch(p){l.e(p)}finally{l.f()}var d=Object.values(c);return d}},getFiltersByInfoId:function(e){return function(t){return e.topicsList.find((function(e){return e.info_id==t}))?e.topicsList.find((function(e){return e.info_id==t})).filters:e.dependencies.flatMap((function(e){return e.data})).find((function(e){return e.info_id==t}))?e.dependencies.flatMap((function(e){return e.data})).find((function(e){return e.info_id==t})).filters:void 0}},getOrderedEntriesByTopic:function(e){return function(t){var n=Object(vt["a"])(t,1),r=n[0];if(!r)return[];var i=[].concat(Object(h["a"])(e.dependencies.map((function(e){return e.data}))),[e.topicsList]).map((function(e){return e.filter((function(e){return"Info"===e.type&&e.TMP_topic===r}))}));if(!i.flat(1).length)return[];var a=function(e,t){var n=i.flatMap((function(n){return n.filter((function(n){return n[e]===t}))}));if(!n.length)return!1;var r=n.at(-1),a=i.flatMap((function(e){return e.filter((function(e){return e.info_id===r.info_id}))}));return Wn(Wn({},r),{},{old_values:a.length>1?a.filter((function(e){return e&&e.TMP_dep})):[]})},s=a("prev_id",""),o={error_code:"NO_PREV_ID",error_text:"Ordering error! No elements with defined 'prev_id'. Make sure you uploaded all dependencies.",error_details:{}};if(!s)return o;var c,l=[s];while(1){var u,d=Object(h["a"])(new Set([a("prev_id",l.at(-1).info_id),a("info_id",l.at(-1).next_id)])),p=zn(e.dependencies);try{var f=function(){var e=u.value;c=d.find((function(t){return t.TMP_dep===e.name}))||c};for(p.s();!(u=p.n()).done;)f()}catch(_){p.e(_)}finally{p.f()}if(c=d.find((function(e){return!e.TMP_is_active}))||c,!c)break;if(l.push(c),!c.next_id)break}return l}},getBestOrderLocationForNpc:function(e,t){return function(n){var r=Object(vt["a"])(n,4),i=r[0],a=r[1],s=r[2],o=r[3],c=t.getOrderedEntriesByTopic([a,s]);if(!c.length)return["",""];if(c.filter((function(e){return e[o]===i})).length)return[c.filter((function(e){return e[o]===i})).slice(-1)[0].info_id,c.filter((function(e){return e[o]===i})).slice(-1)[0].next_id];var l,u=function(){var t,n,r=[];if("speaker_id"===o)r.push("SPEAKER ID"),t=c.filter((function(e){return""!=e[o]})),t.length>1?(t=t.slice(0,Math.ceil(t.length/2)),t=t[Math.floor(Math.random()*Array.length)]):t=t.length>0?t[0]:c.length>1?c[1]:c[0];else{switch(r.push("NOT SPEAKER ID"),o){case"speaker_cell":l=c.filter((function(e){return!e.speaker_id}));break;case"speaker_faction":l=c.filter((function(e){return!e.speaker_id&&!e.speaker_cell}));break;case"speaker_class":l=c.filter((function(e){return!e.speaker_id&&!e.speaker_cell&&!e.speaker_faction}));break;case"speaker_race":l=c.filter((function(e){return!e.speaker_id&&!e.speaker_cell&&!e.speaker_faction&&!e.speaker_class}));break;default:l=c.filter((function(e){return!e.speaker_id&&!e.speaker_cell&&!e.speaker_faction&&!e.speaker_class&&!e.speaker_rank}));break}r.push("LENGTH: "+l.length),t=l.filter((function(e){return""!=e[o]})),t.length>1?(r.push("IF 1"),t=t.slice(0,Math.ceil(t.length/2)),t=t[Math.floor(Math.random()*Array.length)]):t.length>0?(r.push("ELSE IF 1"),t=t[0]):l.length>0?(r.push("ELSE IF 2"),t=l[0]):(r.push("ELSE"),t=c.length>1?c.at(-2):c[0])}if(r.push(t),e.activePlugin.find((function(e){return e.prev_id===t.info_id})))n=e.activePlugin.find((function(e){return e.prev_id===t.info_id})).info_id;else{var i,a=zn(e.dependencies);try{for(a.s();!(i=a.n()).done;){var s=i.value;n=t.next_id,s.data.find((function(e){return e.prev_id===t.info_id}))&&(n=s.data.find((function(e){return e.prev_id===t.info_id})).info_id)}}catch(u){a.e(u)}finally{a.f()}}return{v:[t.info_id,n,r]}}();return"object"===Object(Un["a"])(u)?u.v:void 0}},getNpcById:function(e,t){return function(e){var n=t.getAllNpcs.filter((function(t){return t.id===e}));return n.length?n[0]:{}}},searchNpcs:function(e,t){return function(e){return[].concat(Object(h["a"])(t.getAllNpcs),Object(h["a"])(t.getAllCreatures)).filter((function(t){return t.id.toUpperCase().trim().includes(e.toUpperCase().trim())||t.name.toUpperCase().trim().includes(e.toUpperCase().trim())}))}},searchTopics:function(e,t){return function(e){return t.getAllTopics("Topic").filter((function(t){return t[0].id.toUpperCase().includes(e.toUpperCase())}))}},getDialogueSpeaker:function(e){return function(t){var n,r=[],i=zn(t);try{var a=function(){for(var t=n.value,i=["Topic","Greeting","Persuasion"],a=function(){var n=o[s];e.topicsList.filter((function(e){return e.TMP_type===n})).length&&(r=[].concat(Object(h["a"])(r),Object(h["a"])(e.topicsList.filter((function(e){return e.TMP_type===n})).map((function(e){return e[t]})).filter((function(e){return e})))),r=Object(h["a"])(new Set(r)))},s=0,o=i;s<o.length;s++)a()};for(i.s();!(n=i.n()).done;)a()}catch(s){i.e(s)}finally{i.f()}return r}},getDialogueGlobalExist:function(e){return e.activePlugin.filter((function(e){return"Info"===e.type&&"Journal"!==e.TMP_type&&!e.speaker_id&&!e.speaker_cell&&!e.speaker_faction&&!e.speaker_class&&!e.speaker_rank})).length>0},getDialogueBySpeaker:function(e){return function(t){var n=Object(vt["a"])(t,2),r=n[0],i=n[1],a=[];if("Global Dialogue"===r){var s,o=zn(e.dependencies);try{for(o.s();!(s=o.n()).done;){var c=s.value;a=[].concat(Object(h["a"])(a),Object(h["a"])(c.data.filter((function(e){return e.TMP_type===i})).filter((function(e){return!e["speaker_id"]&&!e["speaker_cell"]&&!e["speaker_faction"]&&!e["speaker_class"]&&!e["speaker_rank"]}))))}}catch(_){o.e(_)}finally{o.f()}var l=e.topicsList.filter((function(e){return e.TMP_type===i})).filter((function(e){return!e["speaker_id"]&&!e["speaker_cell"]&&!e["speaker_faction"]&&!e["speaker_class"]&&!e["speaker_rank"]}));return[].concat(Object(h["a"])(a),Object(h["a"])(l))}var u,d=zn(e.dependencies);try{for(d.s();!(u=d.n()).done;){var p=u.value;a=[].concat(Object(h["a"])(a),Object(h["a"])(p.data.filter((function(e){return e.TMP_type===i})).filter((function(e){return[e["speaker_id"],e["speaker_cell"],e["speaker_faction"],e["speaker_class"],e["speaker_rank"]].includes(r)}))))}}catch(_){d.e(_)}finally{d.f()}var f=e.topicsList.filter((function(e){return e.TMP_type===i})).filter((function(e){return[e["speaker_id"],e["speaker_cell"],e["speaker_faction"],e["speaker_class"],e["speaker_rank"]].includes(r)}));return[].concat(Object(h["a"])(a),Object(h["a"])(f))}}},er={fetchNPCData:function(){var e=Object(g["a"])(regeneratorRuntime.mark((function e(t,n){var r,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return Object(Vn["a"])(t),r=Object(vt["a"])(n,1),i=r[0],e.next=4,be(i);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));function t(t,n){return e.apply(this,arguments)}return t}(),fetchQuestByID:function(){var e=Object(g["a"])(regeneratorRuntime.mark((function e(t,n){var r,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return Object(Vn["a"])(t),r=Object(vt["a"])(n,1),i=r[0],e.next=4,Ce(i);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));function t(t,n){return e.apply(this,arguments)}return t}(),fetchOrderedEntriesByTopic:function(){var e=Object(g["a"])(regeneratorRuntime.mark((function e(t,n){var r,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return Object(Vn["a"])(t),r=Object(vt["a"])(n,1),i=r[0],e.next=4,Oe(i);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));function t(t,n){return e.apply(this,arguments)}return t}(),fetchTopicListByNPC:function(){var e=Object(g["a"])(regeneratorRuntime.mark((function e(t,n){var r,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return Object(Vn["a"])(t),r=Object(vt["a"])(n,1),i=r[0],console.log(i),e.next=5,Pe(i);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));function t(t,n){return e.apply(this,arguments)}return t}(),parseLocalPlugin:function(e,t){var n=e.commit,r=e.dispatch,i=Object(vt["a"])(t,2),a=i[0],s=i[1];n("resetActivePlugin"),r("parsePluginData",[a,s])},replaceDialogueEntry:function(e,t){var n=e.state,r=e.commit,i=Object(vt["a"])(t,2),a=i[0],s=i[1],o=n.activePlugin.find((function(e){return e.info_id===a}));if(o)Object.assign(oldEntry,s);else{var c=n.dependencies.map((function(e){return e.data})).flat(1).filter((function(e){return e.info_id===a}));console.log("DPENTRIES ",c),s.TMP_dep&&delete s.TMP_dep,c.length&&r("pasteDialogue",[s,s.TMP_topic,s.TMP_type,s.prev_id,s.next_id,s.info_id])}},initIndexedDB:function(){var e=Object(g["a"])(regeneratorRuntime.mark((function e(t){var n,r,i,a,s,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.state,r=t.dispatch,e.next=3,ye("activePlugin");case 3:if(n.activePluginDB=e.sent,!n.activePluginDB){e.next=7;break}return e.next=7,r("fetchActiveHeader");case 7:i=n.activeHeader.masters.map((function(e){return e[0]})),a=zn(i),e.prev=9,a.s();case 11:if((s=a.n()).done){e.next=18;break}return o=s.value,e.next=15,ye(o);case 15:n.dependenciesDB[o]=e.sent;case 16:e.next=11;break;case 18:e.next=23;break;case 20:e.prev=20,e.t0=e["catch"](9),a.e(e.t0);case 23:return e.prev=23,a.f(),e.finish(23);case 26:r("fetchPluginsData");case 27:case"end":return e.stop()}}),e,null,[[9,20,23,26]])})));function t(t){return e.apply(this,arguments)}return t}(),fetchAllDialogueNPCs:function(){var e=Object(g["a"])(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return Object(Vn["a"])(t),Object(Jn["a"])(n),e.next=4,we();case 4:Yn.allDialogueNPCs=e.sent;case 5:case"end":return e.stop()}}),e)})));function t(t,n){return e.apply(this,arguments)}return t}(),fetchAllQuestIDs:function(){var e=Object(g["a"])(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return Object(Vn["a"])(t),Object(Jn["a"])(n),e.next=4,Te();case 4:Yn.allQuestIDs=e.sent;case 5:case"end":return e.stop()}}),e)})));function t(t,n){return e.apply(this,arguments)}return t}(),fetchPluginsData:function(){var e=Object(g["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.state,n=t.dispatch,e.next=3,Promise.all([n("fetchAllDialogueNPCs",[]),n("fetchAllQuestIDs",[])]);case 3:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),parsePluginData:function(){var e=Object(g["a"])(regeneratorRuntime.mark((function e(t,n){var r,i,a,s,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.state,i=t.dispatch,a=Object(vt["a"])(n,2),s=a[0],o=a[1],e.next=4,Se(s,o,!0);case 4:if(r.activePluginDB=e.sent,!r.activePluginDB){e.next=9;break}return e.next=8,i("fetchActiveHeader");case 8:i("fetchPluginsData");case 9:case"end":return e.stop()}}),e)})));function t(t,n){return e.apply(this,arguments)}return t}(),parseDependency:function(){var e=Object(g["a"])(regeneratorRuntime.mark((function e(t,n){var r,i,a,s,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.state,i=Object(vt["a"])(n,2),a=i[0],s=i[1],e.next=4,Se(a,s,!1);case 4:o=e.sent,r.dependenciesDB.fileName=o;case 6:case"end":return e.stop()}}),e)})));function t(t,n){return e.apply(this,arguments)}return t}(),fetchActiveHeader:function(){var e=Object(g["a"])(regeneratorRuntime.mark((function e(t){var n,r,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.state,r=n.activePluginDB,e.next=4,r.pluginData.where("type").equalsIgnoreCase("Header").toArray();case 4:i=e.sent,i.length&&(n.activeHeader=i[0]);case 6:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),fetchTopicsData:function(){var e=Object(g["a"])(regeneratorRuntime.mark((function e(t){var n,r,i,a,s,o,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.state,r=n.activePluginDB,e.next=4,r.pluginData.where("type").equalsIgnoreCase("Info").toArray();case 4:i=e.sent,a=0,s=Object.keys(n.dependenciesDB);case 6:if(!(a<s.length)){e.next=15;break}return o=s[a],e.next=10,n.dependenciesDB[o].pluginData.where("type").equalsIgnoreCase("Info").toArray();case 10:c=e.sent,i=[].concat(Object(h["a"])(i),Object(h["a"])(c));case 12:a++,e.next=6;break;case 15:n.topicsList=i;case 16:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),fetchQuestsData:function(){var e=Object(g["a"])(regeneratorRuntime.mark((function e(t){var n,r,i,a,s,o,c,l,u,d,p,f,_;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.state,r=n.activePluginDB,e.next=4,r.pluginData.where("TMP_type").equalsIgnoreCase("Journal").toArray();case 4:i=e.sent,a=0,s=Object.keys(n.dependenciesDB);case 6:if(!(a<s.length)){e.next=15;break}return o=s[a],e.next=10,n.dependenciesDB[o].pluginData.where("TMP_type").equalsIgnoreCase("Journal").toArray();case 10:c=e.sent,i=[].concat(Object(h["a"])(i),Object(h["a"])(c));case 12:a++,e.next=6;break;case 15:l=[],u={id:"",name:"",nameId:"",nameNextId:"",entries:[]},d={id:"",name:"",nameId:"",nameNextId:"",entries:[]},p=zn(i),e.prev=19,p.s();case 21:if((f=p.n()).done){e.next=28;break}if(_=f.value,_){e.next=25;break}return e.abrupt("continue",26);case 25:"Dialogue"===_.type?(_.id!==d.id&&""!==d.id&&(l.push(d),d=JSON.parse(JSON.stringify(u))),d.id=_.id):"Journal"===_.TMP_type&&(1===_.quest_name?(d.name=_.text,d.nameId=_.info_id,d.nameNextId=_.next_id):d.entries.push(_));case 26:e.next=21;break;case 28:e.next=33;break;case 30:e.prev=30,e.t0=e["catch"](19),p.e(e.t0);case 33:return e.prev=33,p.f(),e.finish(33);case 36:d.id&&l.push(d),n.questEntries=l;case 38:case"end":return e.stop()}}),e,null,[[19,30,33,36]])})));function t(t){return e.apply(this,arguments)}return t}()},tr={addFilter:function(e,t){var n=Object(vt["a"])(t,2),r=n[0],i=n[1],a=e.activePlugin.find((function(e){return e.info_id==i})).filters.length;return a>5?{error_code:"NO_FREE_FILTER_SLOTS",error_text:"All 6 filter slots are already filled. Remove one of them to add a new one."}:(a="Slot"+a.toString(),e.activePlugin.find((function(e){return e.info_id==i})).filters.map((function(e){return e.slot})).includes(a)?{error_code:"FILTER_SLOT_ORDER_BREAK",error_text:"Filter slot order is broken. Autofix is not implemented yet."}:(r=Wn(Wn({},r),{},{slot:a}),void e.activePlugin.find((function(e){return e.info_id==i})).filters.push(r)))},deleteDialogueFilter:function(e,t){var n=Object(vt["a"])(t,2),r=n[0],i=n[1],a=e.activePlugin.find((function(e){return e.info_id==r})).filters;for(var s in e.activePlugin.find((function(e){return e.info_id==r})).filters=a.filter((function(e){return e.slot!==i})),a=e.activePlugin.find((function(e){return e.info_id==r})).filters,a)e.activePlugin.find((function(e){return e.info_id==r})).filters[s].slot="Slot"+s.toString()},addDialogue:function(e,t){var n=Object(vt["a"])(t,7),r=n[0],i=n[1],a=n[2],s=n[3],o=n[4],c=n[5],l=n[6],u="",d="";if(console.log(r,i,a,s,o,c,l),"next"===c)if(u=o,e.activePlugin.find((function(e){return e.prev_id===o})))d=e.activePlugin.find((function(e){return e.prev_id===o})).info_id;else{var p,f=zn(e.dependencies);try{for(f.s();!(p=f.n()).done;){var _=p.value;_.data.find((function(e){return e.prev_id===o}))&&(d=_.data.find((function(e){return e.prev_id===o})).info_id)}}catch(w){f.e(w)}finally{f.f()}}else if("prev"===c)if(d=o,e.activePlugin.find((function(e){return e.next_id===o})))u=e.activePlugin.find((function(e){return e.next_id===o})).info_id;else{var g,m=zn(e.dependencies);try{for(m.s();!(g=m.n()).done;){var v=g.value;v.data.find((function(e){return e.next_id===o}))&&(u=v.data.find((function(e){return e.next_id===o})).info_id)}}catch(w){m.e(w)}finally{m.f()}}var y=Math.random().toString().slice(2,15)+Math.random().toString().slice(2,9),k={dialogue_type:"Topic",flags:[0,0],id:a,type:"Dialogue",TMP_topic:a,TMP_type:s},b=e.activePlugin.filter((function(e){return e.TMP_type===s&&e.TMP_topic===a}));b.length||(e.activePlugin=[].concat(Object(h["a"])(e.activePlugin),[k]));var C=null;b.length&&b.at(-1).info_id&&(C=e.activePlugin.findIndex((function(e){return e.info_id===b.at(-1).info_id})));var P={data:{dialogue_type:"Topic",disposition:0,player_rank:-1,speaker_rank:-1,speaker_sex:"Any"},filters:[],flags:[0,0],info_id:y,next_id:d,prev_id:u,text:l,type:"Info",TMP_topic:a,TMP_type:s};r&&"Global"!==r&&(P[r]=i),e.activePlugin.find((function(e){return e.info_id===u}))&&(e.activePlugin.find((function(e){return e.info_id===u})).next_id=y),e.activePlugin.find((function(e){return e.info_id===d}))&&(e.activePlugin.find((function(e){return e.info_id===d})).prev_id=y),C?e.activePlugin.splice(C,0,P):e.activePlugin=[].concat(Object(h["a"])(e.activePlugin),[P])},pasteDialogue:function(e,t){var n=Object(vt["a"])(t,7),r=n[0],i=(n[1],n[2]),a=n[3],s=n[4],o=n[5],c=n[6],l=c||Math.random().toString().slice(2,15)+Math.random().toString().slice(2,9),u="",d="";if("next"===o)if(u=s,e.activePlugin.find((function(e){return e.prev_id===s})))d=e.activePlugin.find((function(e){return e.prev_id===s})).info_id;else{var p,f=zn(e.dependencies);try{for(f.s();!(p=f.n()).done;){var _=p.value;_.data.find((function(e){return e.prev_id===selectedTopic.info_id}))&&(d=_.data.find((function(e){return e.prev_id===selectedTopic.info_id})).info_id)}}catch(P){f.e(P)}finally{f.f()}}else if("prev"===o)if(d=s,e.activePlugin.find((function(e){return e.next_id===s})))u=e.activePlugin.find((function(e){return e.next_id===s})).info_id;else{var g,m=zn(e.dependencies);try{for(m.s();!(g=m.n()).done;){var v=g.value;v.data.find((function(e){return e.next_id===s}))&&(u=v.data.find((function(e){return e.next_id===s})).info_id)}}catch(P){m.e(P)}finally{m.f()}}var y=e.activePlugin.filter((function(e){return e.TMP_type===a&&e.TMP_topic===i})),k={dialogue_type:"Topic",flags:[0,0],id:i,type:"Dialogue",TMP_topic:i,TMP_type:a};y.length||(e.activePlugin=[].concat(Object(h["a"])(e.activePlugin),[k]));var b=null;y.length&&y[0].info_id&&(b=e.activePlugin.findIndex((function(e){return e.info_id===y.at(-1).info_id})));var C=Wn(Wn({},r),{},{info_id:l,next_id:d,prev_id:u,TMP_topic:i,TMP_type:a});console.log(C),e.activePlugin.find((function(e){return e.info_id===u}))&&(e.activePlugin.find((function(e){return e.info_id===u})).next_id=l),e.activePlugin.find((function(e){return e.info_id===d}))&&(e.activePlugin.find((function(e){return e.info_id===d})).prev_id=l),b?e.activePlugin.splice(b,0,C):e.activePlugin=[].concat(Object(h["a"])(e.activePlugin),[C])},moveDialogueEntry:function(e,t){var n=Object(vt["a"])(t,5),r=n[0],i=n[1],a=n[2],s=n[3],o=n[4];console.log([r,i,a,s,o]),e.activePlugin.find((function(e){return e.info_id==r}))?(e.activePlugin.find((function(e){return e.info_id==r})).prev_id=s,e.activePlugin.find((function(e){return e.info_id==r})).next_id=o):console.log("none INFO ID"),e.activePlugin.find((function(e){return e.info_id==i}))?e.activePlugin.find((function(e){return e.info_id==i})).next_id=a:console.log("none OLD PREV"),e.activePlugin.find((function(e){return e.info_id==a}))?e.activePlugin.find((function(e){return e.info_id==a})).prev_id=i:console.log("none OLD NEXT"),e.activePlugin.find((function(e){return e.info_id==s}))?e.activePlugin.find((function(e){return e.info_id==s})).next_id=r:console.log("none NEW PREV"),e.activePlugin.find((function(e){return e.info_id==o}))?e.activePlugin.find((function(e){return e.info_id==o})).prev_id=r:console.log("none NEW NEXT")},deleteDialogueEntry:function(e,t){var n=e.activePlugin.find((function(e){return"Info"===e.type&&e.info_id===t})).prev_id,r=e.activePlugin.find((function(e){return"Info"===e.type&&e.info_id===t})).next_id;e.activePlugin.find((function(e){return e.info_id===n}))&&(e.activePlugin.find((function(e){return e.info_id===n})).next_id=r),e.activePlugin.find((function(e){return e.info_id===r}))&&(e.activePlugin.find((function(e){return e.info_id===r})).prev_id=n),e.activePlugin=e.activePlugin.filter((function(e){return e.info_id!==t}))},editDialogueEntry:function(e,t){var n=Object(vt["a"])(t,2),r=n[0],i=n[1];e.activePlugin.find((function(e){return"Info"===e.type&&e.info_id===r})).text=i},addJournalQuest:function(e,t){var n=Object(vt["a"])(t,2),r=n[0],i=n[1],a=Math.random().toString().slice(2,15)+Math.random().toString().slice(2,9),s={type:"Dialogue",flags:[0,0],id:r,dialogue_type:"Journal",TMP_topic:r,TMP_type:"Journal"},o={type:"Info",flags:[0,0],info_id:a,prev_id:"",next_id:"",data:{dialogue_type:"Journal",disposition:0,speaker_rank:-1,speaker_sex:"Any",player_rank:-1},text:i,quest_name:1,filters:[],TMP_topic:r,TMP_type:"Journal"};e.activePlugin=[].concat(Object(h["a"])(e.activePlugin),[s]),e.activePlugin=[].concat(Object(h["a"])(e.activePlugin),[o])},addJournalEntry:function(e,t){var n=Object(vt["a"])(t,3),r=n[0],i=n[1],a=n[2],s=Math.random().toString().slice(2,15)+Math.random().toString().slice(2,9),o=e.activePlugin.filter((function(e){return"Journal"===e.TMP_type})).filter((function(e){return e.TMP_topic===r})).filter((function(e){return""===e.next_id})),c="",l=null;o.length&&o[0].info_id&&(c=o[0].info_id,l=e.activePlugin.findIndex((function(e){return e.info_id===c})),e.activePlugin.filter((function(e){return e.info_id===c}))[0].next_id=s);var u={TMP_topic:r,TMP_type:"Journal",type:"Info",flags:[0,0],info_id:s,prev_id:c,next_id:"",data:{dialogue_type:"Journal",disposition:parseInt(a),speaker_rank:-1,speaker_sex:"Any",player_rank:-1},text:i,filters:[]};l?e.activePlugin.splice(l+1,0,u):e.activePlugin=[].concat(Object(h["a"])(e.activePlugin),[u])},deleteJournalEntry:function(e,t){var n=e.activePlugin.filter((function(e){return e.info_id===t}));if(n.length){var r=n[0].next_id,i=n[0].prev_id;e.activePlugin=e.activePlugin.filter((function(e){return e.info_id!==t}));var a=e.activePlugin.filter((function(e){return e.info_id===r}));a.length&&(e.activePlugin.filter((function(e){return e.info_id===r}))[0].prev_id=i);var s=e.activePlugin.filter((function(e){return e.info_id===i}));s.length&&(e.activePlugin.filter((function(e){return e.info_id===i}))[0].next_id=r)}},editJournalEntry:function(e,t){var n=Object(vt["a"])(t,4),r=n[0],i=n[1],a=n[2],s=n[3],o=e.activePlugin.filter((function(e){return e.info_id===r}));o.length&&(e.activePlugin.filter((function(e){return e.info_id===r}))[0].text=i,e.activePlugin.filter((function(e){return e.info_id===r}))[0].data.disposition=parseInt(a),s&&(e.activePlugin.filter((function(e){return e.info_id===r}))[0].quest_finish=1),!s&&e.activePlugin.filter((function(e){return e.info_id===r}))[0].quest_finish&&delete e.activePlugin.filter((function(e){return e.info_id===r}))[0]["quest_finish"])},setActivePluginTitle:function(e,t){e.activePluginTitle=t},setJournalHighlight:function(e,t){e.journalHighlight=t},resetActivePlugin:function(e){e.activePlugin=[]},addEntryToActive:function(e,t){e.activePlugin=[].concat(Object(h["a"])(e.activePlugin),[t])},addToActiveArray:function(e,t){var n=Object(vt["a"])(t,2),r=n[0],i=n[1];e.activePlugin[r]?e.activePlugin[r]=[].concat(Object(h["a"])(e.activePlugin[r]),[i]):e.activePlugin[r]=[i]}},nr={state:Yn,getters:Zn,actions:er,mutations:tr},rr={openFile:!1,dialogueModal:"",questCreateModal:!1,dialogueCreateModal:null,selectedFilter:{},primaryModal:"",selectedInfoId:"",selectedFilterIndex:"",clipboardDialogue:{},classicView:!1,classicViewTopic:""},ir={setPrimaryModal:function(e,t){e.primaryModal=t},setClassicView:function(e,t){e.classicView=t},setClassicViewTopic:function(e,t){e.classicView=!0,e.classicViewTopic=t},toggleOpenFile:function(e,t){e.openFile=t},hideOpenFile:function(e){e.openFile=!1},hideDialogue:function(e){e.dialogueModal=""},setDialogueModal:function(e,t){e.dialogueModal=t},setQuestCreateModal:function(e,t){e.questCreateModal=t},setSelectedFilter:function(e,t){e.selectedFilter=t},setSelectedInfoId:function(e,t){e.selectedInfoId=t},setSelectedFilterIndex:function(e,t){e.selectedFilterIndex=t},setClipboardDialogue:function(e,t){var n=Object(vt["a"])(t,2),r=n[0],i=n[1],a=Object.fromEntries(Object.entries(r).filter((function(e){var t=Object(vt["a"])(e,2),n=(t[0],t[1]);return n!=i})));e.clipboardDialogue=a},setDialogueCreateModal:function(e,t){e.dialogueCreateModal=t},hideQuestCreateModal:function(e){e.questCreateModal=!1},hideDialogueCreateModal:function(e){e.dialogueCreateModal=!1}},ar={},sr={getOpenFile:function(e){return e.openFile},getDialogueModal:function(e){return e.dialogueModal},getQuestCreateModal:function(e){return e.questCreateModal},getDialogueCreateModal:function(e){return e.dialogueCreateModal},getPrimaryModal:function(e){return e.primaryModal},getSelectedFilter:function(e){return e.selectedFilter},getSelectedFilterIndex:function(e){return e.selectedFilterIndex},getSelectedInfoId:function(e){return e.selectedInfoId},getClipboardDialogue:function(e){return e.clipboardDialogue},getClassicView:function(e){return e.classicView},getClassicViewTopic:function(e){return e.classicViewTopic}},or={state:rr,getters:sr,actions:ar,mutations:ir},cr={sidebarActive:""},lr={toggleSidebarActive:function(e,t){e.sidebarActive===t?e.sidebarActive="":e.sidebarActive=t},setSidebarActive:function(e,t){e.sidebarActive=t}},ur={},dr={getSidebarActive:function(e){return e.sidebarActive}},pr={state:cr,getters:dr,actions:ur,mutations:lr};r["a"].use(Bn["a"]);var fr=new Bn["a"].Store({modules:{plugin:nr,modals:or,sidebar:pr}});n("278f");r["a"].config.productionTip=!1,r["a"].component("v-icon",k["a"]),r["a"].component("vue-draggable-resizable",q.a),new r["a"]({store:fr,render:function(e){return e(Gn)}}).$mount("#app")},"58dc":function(e,t,n){e.exports=n.p+"img/argonian-m.164dd85c.png"},5963:function(e,t,n){"use strict";n("5151")},"5b5b":function(e,t,n){"use strict";n("1875")},"5ec4":function(e,t,n){},"5fae":function(e,t,n){},"60cd":function(e,t,n){e.exports=n.p+"img/breton-f.a2cc9334.png"},"60da":function(e,t,n){"use strict";n("6e87")},"62be":function(e,t,n){},6505:function(e,t,n){e.exports=n.p+"img/altmer-f.d2d4b15c.png"},"6e87":function(e,t,n){},"712c":function(e,t,n){},7523:function(e,t,n){"use strict";n("99a4")},7603:function(e,t,n){},"7a16":function(e,t,n){"use strict";n("8514")},"7e0b":function(e,t,n){"use strict";n("712c")},8514:function(e,t,n){},8717:function(e,t,n){},8777:function(e,t,n){"use strict";n("1ba0")},"8e22":function(e,t,n){"use strict";n("a0c0")},"8e5f":function(e,t,n){e.exports=n.p+"img/orc-m.d3bc10ef.png"},"8eab":function(e,t,n){"use strict";n("5ec4")},9840:function(e,t,n){},"99a4":function(e,t,n){},a0c0:function(e,t,n){},a10d:function(e,t,n){},a372:function(e,t,n){"use strict";n("40a2")},b331:function(e,t,n){e.exports=n.p+"img/khajiit-f.840ceaf7.png"},b77a:function(e,t,n){e.exports=n.p+"img/imperial-m.0ecf55d9.png"},bc0e:function(e,t,n){"use strict";n("d35f")},c876:function(e,t,n){"use strict";n("8717")},c8ac:function(e,t,n){e.exports=n.p+"img/nord-m.d0ab0fdd.png"},c93e:function(e,t,n){},c9ba:function(e,t,n){e.exports=n.p+"img/nord-f.3d27f02a.png"},ca71:function(e,t,n){},d35f:function(e,t,n){},d63d:function(e,t,n){e.exports=n.p+"img/imperial-f.02c2bd29.png"},d6da:function(e,t,n){"use strict";n("a10d")},de42:function(e,t,n){"use strict";n("5fae")},e28d:function(e,t,n){"use strict";n("49a4")},e4c7:function(e,t,n){"use strict";n("f737")},e80e:function(e,t,n){"use strict";n("f5f2")},ec47:function(e,t,n){},f5f2:function(e,t,n){},f5f20:function(e,t,n){e.exports=n.p+"img/dunmer-f.a6674ab9.png"},f6aa:function(e,t,n){"use strict";n("09f5")},f737:function(e,t,n){},fa44:function(e,t,n){e.exports=n.p+"img/khajiit-m.1361140a.png"},fc17:function(e,t,n){var r={"./altmer-f.png":"6505","./altmer-m.png":"0949","./argonian-f.png":"30fe","./argonian-m.png":"58dc","./bosmer-f.png":"3acb","./bosmer-m.png":"ffcd","./breton-f.png":"60cd","./breton-m.png":"10e0","./dunmer-f.png":"f5f20","./dunmer-m.png":"1b25","./imperial-f.png":"d63d","./imperial-m.png":"b77a","./khajiit-f.png":"b331","./khajiit-m.png":"fa44","./nord-f.png":"c9ba","./nord-m.png":"c8ac","./orc-f.png":"282c","./orc-m.png":"8e5f","./redguard-f.png":"317e","./redguard-m.png":"4f65"};function i(e){var t=a(e);return n(t)}function a(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}i.keys=function(){return Object.keys(r)},i.resolve=a,e.exports=i,i.id="fc17"},ffcd:function(e,t,n){e.exports=n.p+"img/bosmer-m.37cf5b1b.png"}});
//# sourceMappingURL=app.4f043826.js.map