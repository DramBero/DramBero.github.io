import{_ as v,c as l,o as i,h as n,v as a,n as p,t as o,F as d,x as f,A as m,B as _,i as y}from"./index-ChwlniB3.js";const k={data(){return{currentFilter:{},currentOperand:"",currentValue:"",currentValueSecondary:"",inputValue:"",inputValueSecondary:"",editable:"",filterGroupsNew:[{name:"Major filters",types:[{name:"Journal",functions:["JournalType"]},{name:"Function",functions:["Choice","Pcgold"]},{name:"Dead",functions:["DeadType"]},{name:"Item",functions:["ItemType"]}]},{name:"Variables",types:[{name:"Global",functions:["CompareGlobal"]},{name:"Local",functions:["CompareLocal"]}]},{name:"Not",types:[{name:"NotId",functions:["NotIdType"]},{name:"NotCell",functions:["NotCell"]},{name:"NotFaction",functions:["NotFaction"]},{name:"NotClass",functions:["NotClass"]},{name:"NotRace",functions:["NotRace"]},{name:"NotLocal",functions:["Global"]}]},{name:"Player filters",types:[{name:"Function",functions:["PcReputation","PcLevel","PcHealthPercent","PcMagicka","PcFatigue","PcStrength","PcBlock","PcArmorer","PcMediumArmor","PcHeavyArmor","PcBluntWeapon","PcLongBlade","PcAxe","PcSpear","PcAthletics","PcEnchant","PcDestruction","PcAlteration","PcIllusion","PcConjuration","PcMysticism","PcRestoration","PcAlchemy","PcUnarmored","PcSecurity","PcSneak","PcAcrobatics","PcLightArmor","PcShortBlade","PcMarksman","PcMercantile","PcSpeechcraft","PcHandToHand","PcSex","PcExpelled","PcCommonDisease","PcBlightDisease","PcClothingModifier","PcCrimeLevel","PcIntelligence","PcWillpower","PcAgility","PcSpeed","PcEndurance","PcPersonality","PcLuck","PcCorprus","PcVampire","PcHealth"]}]},{name:"Other filters",types:[{name:"Function",functions:["ReactionLow","ReactionHigh","RankRequirement","Reputation","HealthPercent","SameSex","SameRace","SameFaction","FactionRankDifference","Detected","Alarmed","Weather","Level","Attacked","TalkedToPc","CreatureTarget","FriendHit","Fight","Hello","Alarm","Flee","ShouldAttack","Werewolf","WerewolfKills"]}]}],filterGroups:[{name:"Speaker filters:",filters:[{id:"speaker_id",name:"Speaker ID",operands:["Equal"],fields:["npc"]},{id:"speaker_cell",name:"Speaker Cell",operands:["Equal"],fields:["cell"]},{id:"speaker_class",name:"Speaker Class",operands:["Equal"],fields:["class"]},{id:"speaker_faction",name:"Speaker Faction",operands:["Equal"],fields:["faction"]},{id:"speaker_race",name:"Speaker Race",operands:["Equal"],fields:["race"]},{id:"speaker_race",name:"Speaker Rank",operands:["Equal"],fields:["rank"]},{id:"speaker_sex",name:"Speaker Sex",operands:["Equal"],fields:["sex"]}]},{name:"Player filters:",filters:[{id:"player_faction",name:"Player Faction",operands:["Equal"],fields:["faction"]},{id:"player_rank",name:"Player Rank",operands:["Equal"],fields:["rank"]}]},{name:"Disposition:",filters:[{id:"disposition",name:"Disposition",operands:["Greater"],fields:["disposition"]}]},{name:"Functions:",filters:[{id:"function_journal",name:"Journal",function:"JournalType",operands:["Less","LessEqual","NotEqual","Equal","GreaterEqual","Greater"],fields:["journal_id","journal_disposition"]},{id:"function_item",name:"Item",function:"ItemType",operands:["Less","LessEqual","NotEqual","Equal","GreaterEqual","Greater"],fields:["item_id","item_amount"]},{id:"function_dead",name:"Dead",operands:["Less","LessEqual","NotEqual","Equal","GreaterEqual","Greater"],function:"DeadType",fields:["npc"]},{id:"function_choice",name:"Function",function:"Choice",operands:["Less","LessEqual","NotEqual","Equal","GreaterEqual","Greater"],fields:["choice"]}]},{name:"Variables:",filters:[{id:"function_global",name:"Global",function:"VariableCompare",operands:["Less","LessEqual","NotEqual","Equal","GreaterEqual","Greater"],fields:["global_dropdown","global_value"]},{id:"function_local",name:"Local",function:"VariableCompare",operands:["Less","LessEqual","NotEqual","Equal","GreaterEqual","Greater"],fields:["local_input","local_value"]}]},{name:"Not:",filters:[{id:"function_not_id",name:"NotId",function:"NotIdType",operands:["Less","LessEqual","NotEqual","Equal","GreaterEqual","Greater"],fields:["npc","value"]},{id:"function_not_cell",name:"NotCell",function:"NotCell",operands:["Less","LessEqual","NotEqual","Equal","GreaterEqual","Greater"],fields:["cell","value"]},{id:"function_not_class",name:"NotClass",function:"NotClass",operands:["Less","LessEqual","NotEqual","Equal","GreaterEqual","Greater"],fields:["class","value"]},{id:"function_not_faction",name:"NotFaction",function:"NotFaction",operands:["Less","LessEqual","NotEqual","Equal","GreaterEqual","Greater"],fields:["faction","value"]},{id:"function_not_race",name:"NotRace",function:"NotRace",operands:["Less","LessEqual","NotEqual","Equal","GreaterEqual","Greater"],fields:["race","value"]},{id:"function_not_local",name:"NotLocal",function:"VariableCompare",operands:["Less","LessEqual","NotEqual","Equal","GreaterEqual","Greater"],fields:["local","value"]}]}]}},methods:{commitFilter(){if(this.currentFilter.id.includes("function")&&this.getSelectedFilterIndex===""){let s={comparison:this.currentOperand,function:this.currentFilter.function,filter_type:this.currentFilter.name,id:this.currentValueSecondary,value:{Integer:parseInt(this.currentValue)}};this.currentValueSecondary||delete s.id,this.$store.commit("addFilter",[s,this.getSelectedInfoId])}this.$store.commit("setPrimaryModal","")},cancelFilter(){this.$store.commit("setPrimaryModal","")},parseComparison(s){switch(s){case"Equal":return"==";case"GreaterEqual":return">=";case"LessEqual":return"<=";case"Less":return"<";case"Greater":return">";case"NotEqual":return"!=";default:return s}},getFunctions(s){return s.types.map(t=>t.functions).flat()}},computed:{getNpcs(){return this.inputValue?this.$store.getters.searchNpcs(this.inputValue):[]},getSelectedFilter(){return this.$store.getters.getSelectedFilter},getSelectedFilterIndex(){return this.$store.getters.getSelectedFilterIndex},getSelectedInfoId(){return this.$store.getters.getSelectedInfoId}},beforeMount(){let s=this.getSelectedFilter;s.filter_type?(this.currentOperand=s.comparison,this.currentFilter=this.filterGroups.map(t=>t.filters).flat(1).find(t=>t&&t.name===s.filter_type),this.currentValueSecondary=s.id,this.inputValueSecondary=s.id,this.currentValue=Object.values(s.value)[0],this.inputValue=Object.values(s.value)[0]):(this.currentOperand="",this.currentFilter={},this.currentValueSecondary="",this.inputValueSecondary="",this.currentValue="",this.inputValue="")}},q={class:"frame-upload"},E={class:"filter-constructor"},h={key:0,class:"filter-constructor-middle filter-constructor-middle_long"},P={key:1,class:"filter-constructor-middle filter-constructor-middle_long"},F={key:2,class:"filter-constructor-middle"},b={key:3,class:"filter-constructor-end"},S={key:0,class:"save-changes"},g={class:"save-changes__save"},V={class:"filter-editor"},N={key:0,class:"filter-select"},C={class:"filter-group__title"},L={class:"filter-group-filters"},G=["onClick"],I={class:"filter__function"},T={key:1,class:"value-select"},x={class:"input-area"},R={class:"modal-field"},A=["disabled"],D={key:2,class:"operand-select"},M=["onClick"],O={key:3,class:"value-select"},w={class:"input-area"},B={class:"modal-field"},H=["disabled"],j={key:0,class:"found-names"},W=["onClick"],J={class:"found-names-name__title"},U={class:"found-names-name__id"};function z(s,t,K,Q,e,u){return i(),l("div",q,[t[18]||(t[18]=n("h2",{class:"modal__title"},"Dialogue requirement",-1)),n("div",E,[n("div",{class:p(["filter-constructor-start",{"filter-constructor-start_rounded":e.currentValue!==""}])},[t[10]||(t[10]=n("span",{class:"filter__if"},"if ",-1)),e.currentFilter.name?(i(),l("span",{key:0,class:"filter__function filter-editable",onClick:t[0]||(t[0]=r=>e.editable="name")},o(e.currentFilter.name==="Function"?e.currentFilter.function:e.currentFilter.name),1)):a("",!0),e.currentValueSecondary&&e.currentFilter.fields.length>1?(i(),l("span",{key:1,class:"filter__value filter-editable",onClick:t[1]||(t[1]=r=>e.editable="value-secondary")},o(e.currentValueSecondary),1)):a("",!0),e.currentOperand?(i(),l("span",{key:2,class:"filter__operand filter-editable",onClick:t[2]||(t[2]=r=>e.editable="operand")},o(u.parseComparison(e.currentOperand)),1)):a("",!0),e.currentValue!==""?(i(),l("span",{key:3,class:"filter__value filter-editable",onClick:t[3]||(t[3]=r=>e.editable="value")},o(e.currentValue),1)):a("",!0)],2),e.currentFilter.name?a("",!0):(i(),l("div",h,t[11]||(t[11]=[n("span",{class:"filter__function"}," ... ",-1)]))),e.currentFilter.fields&&e.currentFilter.fields.length>1&&!e.currentValueSecondary?(i(),l("div",P,t[12]||(t[12]=[n("span",{class:"filter__subvalue"}," ... ",-1)]))):a("",!0),e.currentOperand?a("",!0):(i(),l("div",F,t[13]||(t[13]=[n("span",{class:"filter__operand"}," ? ",-1)]))),e.currentValue===""?(i(),l("div",b,t[14]||(t[14]=[n("span",{class:"filter__value"}," ... ",-1)]))):a("",!0)]),e.currentFilter.name&&e.currentOperand&&e.currentValue?(i(),l("div",S,[t[15]||(t[15]=n("div",{class:"save-changes__tip"}," Tip: to edit the filter click on the parts of the filter text above. ",-1)),n("div",g,[n("button",{type:"submit",class:"modal-button",onClick:t[4]||(t[4]=r=>u.commitFilter())},"Save"),n("button",{type:"submit",class:"modal-button",onClick:t[5]||(t[5]=r=>u.cancelFilter())},"Cancel")])])):a("",!0),n("div",V,[!e.currentFilter.id||e.editable==="name"?(i(),l("div",N,[(i(!0),l(d,null,f(e.filterGroupsNew,r=>(i(),l("div",{class:"filter-group",key:r.name},[n("div",C,o(r.name),1),n("div",L,[(i(!0),l(d,null,f(u.getFunctions(r),c=>(i(),l("div",{class:"dialogue-filters__filter",onClick:X=>{s.currentFilterFunction=c,e.editable=""},key:c},[t[16]||(t[16]=n("span",{class:"filter__if"},"if ",-1)),n("span",I,o(c),1)],8,G))),128))])]))),128))])):e.currentFilter.fields.length>1&&!e.currentValueSecondary||e.editable==="value-secondary"?(i(),l("div",T,[n("div",x,[n("label",R,[m(n("input",{class:"modal-field__input",name:"dialogue-topic",placeholder:"Type the value",autocomplete:"off",required:"","onUpdate:modelValue":t[6]||(t[6]=r=>e.inputValueSecondary=r)},null,512),[[_,e.inputValueSecondary]])]),n("button",{type:"submit",class:"modal-button",disabled:!e.inputValueSecondary.trim(),onClick:t[7]||(t[7]=r=>{e.currentValueSecondary=e.inputValueSecondary,e.editable=""})}," Save ",8,A)])])):!e.currentOperand||e.editable==="operand"?(i(),l("div",D,[t[17]||(t[17]=y(" Select an operand: ")),(i(!0),l(d,null,f(e.currentFilter.operands,r=>(i(),l("div",{class:"operand",key:r,onClick:c=>{e.currentOperand=r,e.editable=""}},o(u.parseComparison(r)),9,M))),128))])):e.currentValue===""||e.editable==="value"?(i(),l("div",O,[n("div",w,[n("label",B,[m(n("input",{class:"modal-field__input",name:"dialogue-topic",placeholder:"Type the value",autocomplete:"off",required:"","onUpdate:modelValue":t[8]||(t[8]=r=>e.inputValue=r)},null,512),[[_,e.inputValue]])]),n("button",{type:"submit",class:"modal-button",disabled:!e.inputValue.trim(),onClick:t[9]||(t[9]=r=>{e.currentValue=e.inputValue,e.editable=""})}," Save ",8,H)]),e.currentFilter.fields.slice(-1)[0]==="npc"?(i(),l("div",j,[(i(!0),l(d,null,f(u.getNpcs,r=>(i(),l("div",{class:p(["found-names-name",{"found-names-name_active":!r.TMP_dep}]),key:r.id,onClick:c=>e.inputValue=r.id},[n("div",J,o(r.name),1),n("div",U,o(r.id),1)],10,W))),128))])):a("",!0)])):a("",!0)])])}const Z=v(k,[["render",z]]);export{Z as default};
